<html>
<head>
<title>FCSys.Subregions.Phases.BaseClasses</title>
<meta name="title" content="Modelica fuel cell library">
<meta name="keywords" content="fuel cell library, FCSys, fuel cell, PEM, proton exchange membrane, polymer exchange membrane, PEMFC, Modelica, Dymola, open-source, electrochemistry">
<meta name="date" content="2013-6-18">
<meta name="description" content="Base classes (generally not for direct use)">
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="stylesheets/ModelicaDoc.css">
<link rel="shortcut icon" href="../Resources/Documentation/favicon.ico">
<script type="text/javascript" src="javascripts/analytics.js"></script>
</head>
<body>
<div class="sidebar">
  <div class="sidebarwrapper">
  <a href="index.html"><p class="sidebar-title">FCSys</p></a>
  <p class="logo"><a href="index.html">
    <img src="images/icon.gif" class="logo" alt="Logo" width=150>
  </a></p>

<h3>Table of Contents</h3>

<ul>
    <li><a href="FCSys_UsersGuide.html">User's Guide</a></li>
    <li><a href="FCSys_Blocks.html">Blocks</a></li>
    <li><a href="FCSys_Conditions.html">Conditions</a></li>
    <li><a href="FCSys_Assemblies.html">Assemblies</a></li>
    <li><a href="FCSys_Regions.html">Regions</a></li>
    <li><a href="FCSys_Subregions.html">Subregions</a></li>
    <li><a href="FCSys_Connectors.html">Connectors</a></li>
    <li><a href="FCSys_Characteristics.html">Characteristics</a></li>
    <li><a href="FCSys_Units.html">Units</a></li>
    <li><a href="FCSys_Quantities.html">Quantities</a></li>
    <li><a href="FCSys_BaseClasses.html">BaseClasses</a></li>
    </ul>

  <h3>Download</h3>
    <ul>
      <li>Latest: <a href="release/FCSys-2.0.zip" rel="nofollow">FCSys-2.0.zip</a> (**Please check back soon or contact kdavies4 at gmail.com.)</li>
    </ul>
  </div>
</div>

<div class="document">
  <div class="documentwrapper">
    <div class="bodywrapper">
      <div class="body">

<h2><a name="FCSys.Subregions.Phases.BaseClasses"></a><a href="FCSys_Subregions_Phases.html#FCSys.Subregions.Phases">FCSys.Subregions.Phases</a>.BaseClasses</h2>

<b>Base classes (generally not for direct use)</b>

<h3>Information</h3>

Extends from <a href="http://build.openmodelica.org/Documentation/Modelica.Icons.BasesPackage.html#Modelica.Icons.BasesPackage">Modelica.Icons.BasesPackage</a> (Icon for packages containing base classes).

<h3>Package Content</h3>

<table border=1 cellspacing=0 cellpadding=2 >
<tr><th>Name</th><th>Description</th></tr>
<tr><td><img src="images/FCSys.Subregions.Phases.BaseClasses.EmptyPhaseS.png" alt="FCSys.Subregions.Phases.BaseClasses.EmptyPhase" width=20  height=20 align=top>&nbsp;<a href="FCSys_Subregions_Phases_BaseClasses.html#FCSys.Subregions.Phases.BaseClasses.EmptyPhase">EmptyPhase</a>
</td><td>Model for a phase with no species or reactions</td></tr>
</table>
<hr>

<h2><img src="images/FCSys.Subregions.Phases.BaseClasses.EmptyPhaseI.png" alt="FCSys.Subregions.Phases.BaseClasses.EmptyPhase" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Subregions.Phases.BaseClasses.EmptyPhase"></a><a href="FCSys_Subregions_Phases_BaseClasses.html#FCSys.Subregions.Phases.BaseClasses">FCSys.Subregions.Phases.BaseClasses</a>.EmptyPhase</h2>
<b>Model for a phase with no species or reactions</b><p>
<img src="images/FCSys.Subregions.Phases.BaseClasses.EmptyPhaseD.png" alt="FCSys.Subregions.Phases.BaseClasses.EmptyPhase">

<h3>Information</h3>

<p>If one of the species has <code>consEnergy = Conservation.IC</code> and
    <code>reduceTemp</code> is <code>true</code>, then
    <code>initTemp</code> should be set to <code>false</code>.
    Likewise, if one of the species has <code>consTransX = Conservation.IC</code>,
    <code>consTransY = Conservation.IC</code>, or <code>consTransZ = Conservation.IC</code>, then
    <code>initVelX</code> and <code>reduceVel</code> is <code>true</code>, <code>initVelY</code>, or <code>initVelZ</code> should
    be set to <code>false</code> (respectively).</p>

    <p>The area fill factor (<b><i>k</i></b>) is a vector which inversely scales all
    the transport coefficients (&beta;, &zeta;, &eta;, and &theta;) of all of the species
    within the phase.  It can be used to introduce minor head loss or the effects of
    porosity or tortousity.  These effects may be anisotropic.</p>

    <p>Porosity is often quoted in material data sheets (e.g.,
    [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">Toray2010</a>]) as volumetric porosity.  Using the
    Bruggeman correction factor [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">Weber2004</a>, p. 4696],
    the area fill factor for the solid should be set to (1 - &epsilon;)<sup>3/2</sup>
    along each axis, where &epsilon; is the volumetric porosity (or volumetric fill factor
    of the gas).<sup><a href="#fn1">1</a></sup></p>

    <hr>

    <small>
    <p id="fn1">1. Note that the Bruggeman correction contradicts what one would
    expect based on geometry&mdash;that the area fill factor would be the volumetric fill factor (1 - &epsilon;)
    raised to the two-thirds power (not three halfs).</p>

<p>

<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>n_spec</td><td>&nbsp;</td><td>Number of species</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</td></tr>
<tr><td>Integer</td><td>n_faces</td><td>&nbsp;</td><td>Number of pairs of faces (<i>n</i><sub>faces</sub>)</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k[Axis]</td><td>{1,1,1}</td><td>Area fill factor (<b><i>k</i></b>) [1]</td></tr>
<TR bgcolor="#c0c0c0"><TD colspan=4><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>reduceVel</td><td>false</td><td>Same velocity for all species</td></tr>
<tr><td>Boolean</td><td>reduceTemp</td><td>false</td><td>Same temperature for all species</td></tr>
<TR bgcolor="#c0c0c0"><TD colspan=4><b>Initialization</b></td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Velocity</td></tr>
<tr><td>Boolean</td><td>initVelX</td><td>true</td><td>Initialize the x component</td></tr>
<tr><td>Boolean</td><td>initVelY</td><td>true</td><td>Initialize the y component</td></tr>
<tr><td>Boolean</td><td>initVelZ</td><td>true</td><td>Initialize the z component</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Velocity">Velocity</a></td><td>phi_IC[Axis]</td><td>{0,0,0}</td><td>Initial velocity (<b>&phi;</b><sub>IC</sub>) [l/T]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Temperature</td></tr>
<tr><td>Boolean</td><td>initTemp</td><td>true</td><td>Initialize</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">TemperatureAbsolute</a></td><td>T_IC</td><td>&nbsp;</td><td>Initial temperature (<i>T</i><sub>IC</sub>) [l2.m/(N.T2)]</td></tr>
</table>
<p>

<h3>Connectors</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.InertDalton">InertDalton</a></td><td>inertDalton</td><td>&nbsp;</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">FaceBus</a></td><td>xPositive</td><td>Positive face along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">FaceBus</a></td><td>xNegative</td><td>Negative face along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">FaceBus</a></td><td>yPositive</td><td>Positive face along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">FaceBus</a></td><td>yNegative</td><td>Negative face along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">FaceBus</a></td><td>zPositive</td><td>Positive face along the z axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">FaceBus</a></td><td>zNegative</td><td>Negative face along the z axis</td></tr>
</table>
<p>

<h3>Modelica definition</h3>

<pre>
<font color="blue">model</font> EmptyPhase <font color="darkgreen">&quot;Model for a phase with no species or reactions&quot;</font>
  <font color="blue">import </font><a href="FCSys_BaseClasses_Utilities.html#FCSys.BaseClasses.Utilities.index">FCSys.BaseClasses.Utilities.index</a>;
  <font color="darkgreen">// extends FCSys.BaseClasses.Icons.Names.Middle;</font>

  <font color="blue">parameter </font>Integer n_spec(start=0) <font color="darkgreen">&quot;Number of species&quot;</font>;

  <font color="darkgreen">// Geometry</font>
  <font color="blue">parameter </font>Integer n_faces(min=1, max=3) <font color="darkgreen">
    &quot;Number of pairs of faces (<i>n</i><sub>faces</sub>)&quot;</font>;
  <font color="darkgreen">// This can&#39;t be an outer parameter in Dymola 7.4.</font>
  <font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> k[Axis](
    <font color="blue">each </font>min=Modelica.Constants.small,
    <font color="blue">each </font><font color="blue">final </font>nominal=1) = {1,1,1} <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Area fill factor (<b><i>k</i></b>)&quot;</font>;

  <font color="darkgreen">// Assumptions</font>
  <font color="blue">parameter </font>Boolean reduceVel=false <font color="darkgreen">&quot;Same velocity for all species&quot;</font>;
  <font color="blue">parameter </font>Boolean reduceTemp=false <font color="darkgreen">&quot;Same temperature for all species&quot;</font>;

  <font color="darkgreen">// Initialization</font>
  <font color="blue">parameter </font>Boolean initVelX=true <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Initialize the x component&quot;</font>;
  <font color="blue">parameter </font>Boolean initVelY=true <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Initialize the y component&quot;</font>;
  <font color="blue">parameter </font>Boolean initVelZ=true <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Initialize the z component&quot;</font>;
  <font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.Velocity">Q.Velocity</a> phi_IC[Axis]={0,0,0} <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Initial velocity (<b>&phi;</b><sub>IC</sub>)&quot;</font>;
  <font color="blue">parameter </font>Boolean initTemp=true <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Initialize&quot;</font>;
  <font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T_IC(nominal=300*U.K, start=environment.T) <font color="blue">
    if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Initial temperature (<i>T</i><sub>IC</sub>)&quot;</font>;

  <a href="FCSys_Connectors.html#FCSys.Connectors.InertDalton">Connectors.InertDalton</a> inertDalton(<font color="blue">final </font>n_trans=n_trans);
  <a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">Connectors.FaceBus</a> xPositive <font color="blue">if </font>inclFaces[Axis.x]<font color="blue"> and </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Positive face along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">Connectors.FaceBus</a> xNegative <font color="blue">if </font>inclFaces[Axis.x]<font color="blue"> and </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Negative face along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">Connectors.FaceBus</a> yPositive <font color="blue">if </font>inclFaces[Axis.y]<font color="blue"> and </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Positive face along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">Connectors.FaceBus</a> yNegative <font color="blue">if </font>inclFaces[Axis.y]<font color="blue"> and </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Negative face along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">Connectors.FaceBus</a> zPositive <font color="blue">if </font>inclFaces[Axis.z]<font color="blue"> and </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Positive face along the z axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.FaceBus">Connectors.FaceBus</a> zNegative <font color="blue">if </font>inclFaces[Axis.z]<font color="blue"> and </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Negative face along the z axis&quot;</font>;

  <font color="blue">outer </font><font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.Length">Q.Length</a> L[Axis] <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Length&quot;</font>;
  <font color="blue">outer </font><font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.Area">Q.Area</a> A[Axis] <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Cross-sectional area&quot;</font>;
  <font color="darkgreen">// Note:  These must be public in Dymola 7.4, so HideResult is used.</font>

<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">inner </font><font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.Length">Q.Length</a> Lprime[Axis]=k .* A ./ L <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Effective cross-sectional area per length&quot;</font>;
  <font color="blue">outer </font><font color="blue">parameter </font>Integer n_trans <font color="darkgreen">
    &quot;Number of components of translational momentum&quot;</font>;
  <font color="blue">outer </font><font color="blue">parameter </font>Integer cartTrans[:] <font color="darkgreen">
    &quot;Cartesian-axis indices of the components of translational momentum&quot;</font>;
  <font color="blue">outer </font><font color="blue">parameter </font>Integer facesCart[:] <font color="darkgreen">
    &quot;Face-pair indices of the Cartesian axes&quot;</font>;
  <font color="blue">outer </font><font color="blue">parameter </font>Boolean inclTrans[Axis] <font color="darkgreen">
    &quot;true, if each component of translational momentum is included&quot;</font>;
  <font color="blue">outer </font><font color="blue">parameter </font>Boolean inclFaces[Axis] <font color="darkgreen">
    &quot;true, if each pairs of faces is included&quot;</font>;

  <font color="blue">outer </font><a href="FCSys_Conditions.html#FCSys.Conditions.Environment">Conditions.Environment</a> environment <font color="darkgreen">&quot;Environmental conditions&quot;</font>;
  <font color="darkgreen">// This component is conditional to prevent a mathematical singularity</font>
  <font color="darkgreen">// when two or more empty phases (without any species included) are</font>
  <font color="darkgreen">// connected.</font>

  <a href="FCSys_Connectors.html#FCSys.Connectors.InertInternal">Connectors.InertInternal</a> common(
    <font color="blue">final </font>n_trans=n_trans,
    <font color="blue">final </font>inclTranslational=reduceVel,
    <font color="blue">final </font>inclThermal=reduceTemp,
    translational(phi(
        <font color="blue">each </font>stateSelect=StateSelect.prefer,
        <font color="blue">final </font>start=phi_IC[cartTrans],
        <font color="blue">final </font>fixed={initVelX,initVelY,initVelZ}[<font color="red">index</font>(inclTrans)])),
    thermal(T(
        stateSelect=StateSelect.prefer,
        <font color="blue">final </font>start=T_IC,
        <font color="blue">final </font>fixed=initTemp))) <font color="blue">if </font>n_spec &gt; 0<font color="blue"> and </font>(reduceVel<font color="blue"> or </font>reduceTemp) <font color="darkgreen">
    &quot;Internal connector to directly couple velocities and/or temperatures&quot;</font>;
  <font color="darkgreen">// Note:  It would be simpler to use</font>
  <font color="darkgreen">// {initVelX, initVelY, initVelZ}[cartTrans] for the fixed attribute of</font>
  <font color="darkgreen">// inert.translational, but Dymola 7.4 refuses to accept it.</font>

<font color="blue">equation </font>
  <font color="blue">if </font>n_spec == 0<font color="blue"> then</font>
    inertDalton.V = 0;
    inertDalton.mPhidot = <font color="red">zeros</font>(n_trans);
    inertDalton.Qdot = 0;
  <font color="blue">end if</font>;
<font color="blue">end </font>EmptyPhase;
</pre>
      </div>
    </div>
  </div>
</div>
<div class="footer">
  &copy; Copyright 2012, Kevin Davies, Georgia Tech Research Corporation. Last updated Tue Jun 18 14:06:14 2013.
</div>
</body>
</html>
