<HTML>
<HEAD>
<TITLE>FCSys.WorkInProgress.Blocks.Continuous.Plants</TITLE>
<META name="HTML-Generator" content="Dymola">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Plants<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.WorkInProgress.Blocks.Continuous.Plants"></A><A HREF="FCSys_WorkInProgress_Blocks_Continuous.html#FCSys.WorkInProgress.Blocks.Continuous"
>FCSys.WorkInProgress.Blocks.Continuous</A>.Plants</H2>
<P><H3>Information</H3></P>
Extends from <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceS.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpace" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpace"
>StateSpace</A>
</TD><TD>Linear state space system</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceS.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceWNoise" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceWNoise"
>StateSpaceWNoise</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumS.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.Pendulum" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.Pendulum"
>Pendulum</A>
</TD><TD>Simple pendulum with one revolute joint and one body</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumS.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumDummy" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumDummy"
>PendulumDummy</A>
</TD><TD>Extension of the Pendulum model with an additional input so that the model has the same number of inputs and outputs</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClassesS.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants_BaseClasses.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses"
>BaseClasses</A>
</TD><TD>Base classes (not generally for direct use)</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE StateSpace<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceI.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpace" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpace"></A><A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants"
>FCSys.WorkInProgress.Blocks.Continuous.Plants</A>.StateSpace</H2>
<B>Linear state space system</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceD.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpace">
<P><H3>Information</H3></P>
<PRE></pre>
<p>The State Space block defines the relation
between the input u and the output
y in state space form:</p>
<pre>

    der(x) = A * x + B * u
        y  = C * x + D * u
</pre>
<p>The input is a vector of length n_u, the output is a vector
of length n_y and n_x is the number of states. Accordingly</p>
<pre>
        A has the dimension: A(n_x,n_x),
        B has the dimension: B(n_x,n_u),
        C has the dimension: 'C+'(n_y,n_x),
        D has the dimension: D(n_y,n_u)
</pre>
<p>Example:</p>
<pre>
     parameter: A = [0.12, 2;3, 1.5]
     parameter: B = [2, 7;3, 1]
     parameter: C = [0.1, 2]
     parameter: D = zeros(n_y,n_u)
results in the following equations:
  [der(x[1])]   [0.12  2.00] [x[1]]   [2.0  7.0] [u[1]]
  [         ] = [          ]*[    ] + [        ]*[    ]
  [der(x[2])]   [3.00  1.50] [x[2]]   [0.1  2.0] [u[2]]
                             [x[1]]            [u[1]]
       y[1]   = [0.1  2.0] * [    ] + [0  0] * [    ]
                             [x[2]]            [u[2]]
</pre>
<pre>
</PRE><P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants_BaseClasses.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant"
>FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant</A>.
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>A[:, size(A, 1)]</TD><TD>&nbsp;</TD><TD>Matrix A of state space model (e.g. A=[1, 0; 0, 1])</TD></TR>
<TR><TD>Real</TD><TD>B[size(A, 1), :]</TD><TD>&nbsp;</TD><TD>Matrix B of state space model (e.g. B=[1; 1])</TD></TR>
<TR><TD>Real</TD><TD>C[:, size(A, 1)]</TD><TD>&nbsp;</TD><TD>Matrix C of state space model (e.g. C=[1, 1])</TD></TR>
<TR><TD>Real</TD><TD>D[size(C, 1), size(B, 2)]</TD><TD>zeros(size(C, 1), size(B, 2))</TD><TD>Matrix D of state space model</TD></TR>
<TR><TD>Integer</TD><TD>n_in</TD><TD>size(B, 2)</TD><TD>Number of inputs</TD></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>size(C, 1)</TD><TD>Number of outputs</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initial Conditions</TD></TR>
<TR><TD><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Init</A></TD><TD>initType</TD><TD>Modelica.Blocks.Types.Init.N...</TD><TD>Type of initialization (1: no init, 2: steady state, 3: initial state, 4: initial output)</TD></TR>
<TR><TD>Real</TD><TD>x_0[n_x]</TD><TD>zeros(n_x)</TD><TD>Initial or guess values of states</TD></TR>
<TR><TD>Real</TD><TD>y_0[n_y]</TD><TD>zeros(n_y)</TD><TD>Initial values of outputs (remaining states are in steady state if possible)</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealInput"
>RealInput</A></TD><TD>u[n_in]</TD><TD>Connector of Real input signals</TD></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> StateSpace <font color="darkgreen">&quot;Linear state space system&quot;</font>
  <font color="blue">import </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Modelica.Blocks.Types.Init</A>;
  <font color="blue">parameter </font>Real A[:, <font color="red">size</font>(A, 1)] <font color="darkgreen">
    &quot;Matrix A of state space model (e.g. A=[1, 0; 0, 1])&quot;</font>;
  <font color="blue">parameter </font>Real B[<font color="red">size</font>(A, 1), :] <font color="darkgreen">
    &quot;Matrix B of state space model (e.g. B=[1; 1])&quot;</font>;
  <font color="blue">parameter </font>Real C[:, <font color="red">size</font>(A, 1)] <font color="darkgreen">
    &quot;Matrix C of state space model (e.g. C=[1, 1])&quot;</font>;
  <font color="blue">parameter </font>Real D[<font color="red">size</font>(C, 1), <font color="red">size</font>(B, 2)]=<font color="red">zeros</font>(<font color="red">size</font>(C, 1), <font color="red">size</font>(B, 2)) <font color="darkgreen">
    &quot;Matrix D of state space model&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Blocks_Types.html#Modelica.Blocks.Types.Init"
>Modelica.Blocks.Types.Init</A> initType=Modelica.Blocks.Types.Init.NoInit
    <font color="darkgreen">&quot;Type of initialization (1: no init, 2: steady state, 3: initial state, 4: initial output)&quot;</font>;
  <font color="blue">parameter </font>Real x_0[n_x]=<font color="red">zeros</font>(n_x) <font color="darkgreen">&quot;Initial or guess values of states&quot;</font>;
  <font color="blue">parameter </font>Real y_0[n_y]=<font color="red">zeros</font>(n_y) <font color="darkgreen">
    &quot;Initial values of outputs (remaining states are in steady state if possible)&quot;</font>;
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants_BaseClasses.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant"
>FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant</A>
    (<font color="blue">final </font>n_in=<font color="red">size</font>(B, 2), <font color="blue">final </font>n_out=<font color="red">size</font>(C, 1));
  <font color="blue">output </font>Real x[<font color="red">size</font>(A, 1)](start=x_0) <font color="darkgreen">&quot;State vector&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">parameter </font>Integer n_x=<font color="red">size</font>(A, 1) <font color="darkgreen">&quot;number of states&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Integer n_y=<font color="red">size</font>(C, 1) <font color="darkgreen">&quot;number of outputs&quot;</font>;

<font color="blue">initial </font><font color="blue">equation </font>
  <font color="blue">if </font>initType == Init.SteadyState<font color="blue"> then</font>
    <font color="red">der</font>(x)/U.s = <font color="red">zeros</font>(n_x);
  <font color="blue">elseif </font>initType == Init.InitialState<font color="blue"> then</font>
    x = x_0;
  <font color="blue">elseif </font>initType == Init.InitialOutput<font color="blue"> then</font>
    x = <font color="red">Modelica.Math.Matrices.equalityLeastSquares</font>(
      A,
      -B*u,
      C,
      y_0 - D*u);
  <font color="blue">end if</font>;

<font color="blue">equation </font>
  <font color="red">der</font>(x)/U.s = A*x + B*u;
  y = C*x + D*u;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>StateSpace;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE StateSpaceWNoise<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceI.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceWNoise" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceWNoise"></A><A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants"
>FCSys.WorkInProgress.Blocks.Continuous.Plants</A>.StateSpaceWNoise</H2>
<IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceWNoiseD.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpaceWNoise">
<P><H3>Information</H3></P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants_BaseClasses.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant"
>FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant</A>.
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>n_in</TD><TD>size(B, 2)</TD><TD>Number of inputs</TD></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>size(C, 1)</TD><TD>Number of outputs</TD></TR>
<TR><TD>Real</TD><TD>A[:, size(A, 1)]</TD><TD>identity(2)</TD><TD>System gain of continuous-time state space model (state to derivative of state)</TD></TR>
<TR><TD>Real</TD><TD>B[size(A, 1), :]</TD><TD>identity(2)</TD><TD>Input gain of continuous-time state space model (actuation to derivative of state)</TD></TR>
<TR><TD>Real</TD><TD>C[:, size(A, 1)]</TD><TD>identity(2)</TD><TD>Output gain of continuous-time state space model (state to measurement)</TD></TR>
<TR><TD>Real</TD><TD>act_min[n_out]</TD><TD>-act_max</TD><TD>Minimum actuator input</TD></TR>
<TR><TD>Real</TD><TD>act_max[n_in]</TD><TD>ones(n_in)</TD><TD>Maximum actuator input</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initial Conditions</TD></TR>
<TR><TD>Real</TD><TD>x_0[n_x]</TD><TD>zeros(n_x)</TD><TD>Initial states of the plant</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealInput"
>RealInput</A></TD><TD>u[n_in]</TD><TD>Connector of Real input signals</TD></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> StateSpaceWNoise
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants_BaseClasses.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant"
>FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant</A>
    (<font color="blue">final </font>n_in=<font color="red">size</font>(B, 2), <font color="blue">final </font>n_out=<font color="red">size</font>(C, 1));
  <font color="blue">parameter </font>Real A[:, <font color="red">size</font>(A, 1)]=<font color="red">identity</font>(2) <font color="darkgreen">
    &quot;System gain of continuous-time state space model (state to derivative of state)&quot;</font>;
  <font color="blue">parameter </font>Real B[<font color="red">size</font>(A, 1), :]=<font color="red">identity</font>(2) <font color="darkgreen">
    &quot;Input gain of continuous-time state space model (actuation to derivative of state)&quot;</font>;
  <font color="blue">parameter </font>Real C[:, <font color="red">size</font>(A, 1)]=<font color="red">identity</font>(2) <font color="darkgreen">
    &quot;Output gain of continuous-time state space model (state to measurement)&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Integer n_x=<font color="red">size</font>(A, 1) <font color="darkgreen">&quot;Number of states&quot;</font>;
  <font color="blue">parameter </font>Real act_min[n_out]=-act_max <font color="darkgreen">&quot;Minimum actuator input&quot;</font>;
  <font color="blue">parameter </font>Real act_max[n_in]=<font color="red">ones</font>(n_in) <font color="darkgreen">&quot;Maximum actuator input&quot;</font>;
  <font color="blue">parameter </font>Real x_0[n_x]=<font color="red">zeros</font>(n_x) <font color="darkgreen">&quot;Initial states of the plant&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.StateSpace"
>StateSpace</A> stateSpace(
    <font color="blue">final </font>initType=Modelica.Blocks.Types.Init.InitialState,
    <font color="blue">final </font>A=A,
    <font color="blue">final </font>B=B,
    <font color="blue">final </font>C=C,
    <font color="blue">final </font>x_0=x_0);
  <A HREF="FCSys_WorkInProgress_Blocks_Continuous_Sources.html#FCSys.WorkInProgress.Blocks.Continuous.Sources.RandomNormal"
>Sources.RandomNormal</A> noise(
    <font color="blue">final </font>n_out=n_in,
    T_s=0.1,
    T_end=140);
  <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</A> noiseGain[n_out](<font color="blue">each </font>k=0.04);
  <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> disturbance[n_in](<font color="blue">each </font>height=-0.2, <font color="blue">each </font>
      startTime=60);
  <A HREF="FCSys_WorkInProgress_Blocks_Math.html#FCSys.WorkInProgress.Blocks.Math.Limiter"
>FCSys.WorkInProgress.Blocks.Math.Limiter</A> saturation(
    <font color="blue">final </font>u_max=act_max,
    <font color="blue">final </font>u_min=act_min,
    <font color="blue">final </font>n=n_in);
  <A HREF="FCSys_WorkInProgress_Blocks_Math.html#FCSys.WorkInProgress.Blocks.Math.AddInclInclSkip"
>FCSys.WorkInProgress.Blocks.Math.AddInclInclSkip</A> addDisturbance(<font color="blue">final </font>n=n_in);
  <A HREF="FCSys_WorkInProgress_Blocks_Math.html#FCSys.WorkInProgress.Blocks.Math.AddInclInclSkip"
>FCSys.WorkInProgress.Blocks.Math.AddInclInclSkip</A> addNoise(<font color="blue">final </font>n=n_out);</textblock>

<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(addDisturbance.y, stateSpace.u);
  <font color="red">connect</font>(addDisturbance.u_2, saturation.y);
  <font color="red">connect</font>(disturbance.y, addDisturbance.u_1);
  <font color="red">connect</font>(addNoise.u_2, stateSpace.y);
  <font color="red">connect</font>(noiseGain.y, addNoise.u_1);
  <font color="red">connect</font>(noise.y, noiseGain.u);
  <font color="red">connect</font>(u, saturation.u);
  <font color="red">connect</font>(addNoise.y, y);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>StateSpaceWNoise;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Pendulum<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumI.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.Pendulum" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Continuous.Plants.Pendulum"></A><A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants"
>FCSys.WorkInProgress.Blocks.Continuous.Plants</A>.Pendulum</H2>
<B>Simple pendulum with one revolute joint and one body</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumD.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.Pendulum">
<P><H3>Information</H3></P>
<PRE></pre>
<p>This simple model demonstrates that by just dragging species
default animation is defined that shows the structure of the
assembled system.

<IMG src="/opt/dymola/Modelica/Library/Modelica 3.2/Resources/Images/MultiBody/Examples/Elementary/Pendulum.png"
ALT="model Examples.Elementary.Pendulum">
<pre></PRE><P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants_BaseClasses.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant"
>FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant</A>.
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>n_in</TD><TD>1</TD><TD>Number of inputs</TD></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>2</TD><TD>Number of outputs</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealInput"
>RealInput</A></TD><TD>u[n_in]</TD><TD>Connector of Real input signals</TD></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Pendulum <font color="darkgreen">&quot;Simple pendulum with one revolute joint and one body&quot;</font>
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants_BaseClasses.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant"
>FCSys.WorkInProgress.Blocks.Continuous.Plants.BaseClasses.PartialPlant</A>
    (n_in=1, <font color="blue">final </font>n_out=2);
<textblock type="annotcomp" expanded="false">  <font color="blue">inner </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody.World"
>Modelica.Mechanics.MultiBody.World</A> world;
  <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints.Revolute"
>Modelica.Mechanics.MultiBody.Joints.Revolute</A> joint(
    n={0,0,1},
    useAxisFlange=true,
    phi(fixed=true, start=1.553343034275));
  Modelica.Mechanics.Rotational.Species.Damper damper(w_rel(fixed=true), d=0.1);
  <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts.Body"
>Modelica.Mechanics.MultiBody.Parts.Body</A> body(m=1.0, r_CM={0.5,0,0});
  <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Mechanics_Rotational_Sensors.html#Modelica.Mechanics.Rotational.Sensors.RelAngleSensor"
>Modelica.Mechanics.Rotational.Sensors.RelAngleSensor</A> relAngleSensor;
  <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Mechanics_Translational_Sensors.html#Modelica.Mechanics.Translational.Sensors.RelPositionSensor"
>Modelica.Mechanics.Translational.Sensors.RelPositionSensor</A> relPositionSensor;
  <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints.Prismatic"
>Modelica.Mechanics.MultiBody.Joints.Prismatic</A> base(
    s(fixed=true),
    v(fixed=true),
    <font color="blue">final </font>useAxisFlange=true,
    n(displayUnit=&quot;1&quot;) = {1,0,0});
  <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Mechanics_Translational_Sources.html#Modelica.Mechanics.Translational.Sources.Force2"
>Modelica.Mechanics.Translational.Sources.Force2</A> force;</textblock>

<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(damper.flange_b, joint.axis);
  <font color="red">connect</font>(joint.support, damper.flange_a);
  <font color="red">connect</font>(body.frame_a, joint.frame_b);
  <font color="red">connect</font>(relAngleSensor.flange_b, damper.flange_b);
  <font color="red">connect</font>(relAngleSensor.flange_a, damper.flange_a);
  <font color="red">connect</font>(base.frame_b, joint.frame_a);
  <font color="red">connect</font>(relAngleSensor.phi_rel, y[1]);
  <font color="red">connect</font>(force.flange_b, base.axis);
  <font color="red">connect</font>(force.f, u[1]);
  <font color="red">connect</font>(y[2], relPositionSensor.s_rel);
  <font color="red">connect</font>(relPositionSensor.flange_a, force.flange_a);
  <font color="red">connect</font>(relPositionSensor.flange_b, force.flange_b);
  <font color="red">connect</font>(force.flange_a, base.support);
  <font color="red">connect</font>(world.frame_b, base.frame_a);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Pendulum;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PendulumDummy<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumI.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumDummy" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumDummy"></A><A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants"
>FCSys.WorkInProgress.Blocks.Continuous.Plants</A>.PendulumDummy</H2>
<B>Extension of the Pendulum model with an additional input so that the model has the same number of inputs and outputs</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumD.png" ALT="FCSys.WorkInProgress.Blocks.Continuous.Plants.PendulumDummy">
<P><H3>Information</H3></P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.Pendulum"
>Pendulum</A> (Simple pendulum with one revolute joint and one body).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>n_in</TD><TD>2</TD><TD>Number of inputs</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealInput"
>RealInput</A></TD><TD>u[n_in]</TD><TD>Connector of Real input signals</TD></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> PendulumDummy <font color="darkgreen">
  &quot;Extension of the Pendulum model with an additional input so that the model has the same number of inputs and outputs&quot;</font>
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Continuous_Plants.html#FCSys.WorkInProgress.Blocks.Continuous.Plants.Pendulum"
>Pendulum</A>(<font color="blue">final </font>n_in=2);
  <font color="darkgreen">/*
  Note:  The setup by Rossiter currently fails for FCSys.Blocks.Continuous.Plants.Pendulum
  because it has a different number of inputs and outputs.  The setup requires a system with
  the same number of inputs and outputs (see Rossiter (2003, p. 21)).  Here, a dummy input is
  added so that the Rossiter algorithm will complete without an error.  However, there is
  still a warning (&quot;Warning:  Matrix is singular to working precision.&quot;) and many of the MPC
  matrices with have NaN entries that Dymola cannot handle.
  */</font>
<textblock type="annotcomp" expanded="false">
<font color="blue">end </font>PendulumDummy;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.Dymola.com/">Dymola</a> Fri Mar 22 01:13:45 2013.
</address></BODY>
</HTML>
