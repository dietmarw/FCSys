<HTML>
<HEAD>
<TITLE>FCSys.WorkInProgress.Blocks.Discrete.Sources</TITLE>
<META name="HTML-Generator" content="Dymola">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Sources<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.WorkInProgress.Blocks.Discrete.Sources"></A><A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete"
>FCSys.WorkInProgress.Blocks.Discrete</A>.Sources</H2>
<P><H3>Information</H3></P>
Extends from <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons_SourcesPackage.html#Modelica.Icons.SourcesPackage"
>Modelica.Icons.SourcesPackage</A> (Icon for packages containing sources).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomNormalS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomNormal" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete_Sources.html#FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomNormal"
>RandomNormal</A>
</TD><TD>Generate a sequence of normal (Gaussian) random numbers</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomUniformS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomUniform" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete_Sources.html#FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomUniform"
>RandomUniform</A>
</TD><TD>Generate a sequence of uniform random numbers</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE RandomNormal<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomNormalI.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomNormal" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomNormal"></A><A HREF="FCSys_WorkInProgress_Blocks_Discrete_Sources.html#FCSys.WorkInProgress.Blocks.Discrete.Sources"
>FCSys.WorkInProgress.Blocks.Discrete.Sources</A>.RandomNormal</H2>
<B>Generate a sequence of normal (Gaussian) random numbers</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomNormalD.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomNormal">
<P><H3>Information</H3></P>
<PRE></pre><p>The values of the sequence are normally distributed with mean <code>mu</code> and standard deviation <code>sigma</code>. The random numbers are (re)generated at the start of every simulation.</p>

<p>Be sure to set <code>T_end</code> to be greater than or equal to the stop time of the simulation.  Otherwise, the sequence will be periodic over the simulation (i.e., it will repeat).</p>

<p>The model uses the Box-Muller transform to generate normal random numbers from uniform random numbers.  It generates the uniform random numbers using <code>internal_twister_uniform()</code>.  This function uses the Mersenne twister pseudorandom number generator and its implementation is specific to Dymola (i.e., not general to Modelica).</p><pre></PRE><P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A> (Multiple Output block), <A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A> (Base class of discrete blocks).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>1</TD><TD>Number of outputs</TD></TR>
<TR><TD>&nbsp;</TD><TD>samplePeriod</TD><TD>0.002</TD><TD>Sample period of species</TD></TR>
<TR><TD>&nbsp;</TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant</TD></TR>
<TR><TD>Real</TD><TD>mu[:]</TD><TD>0*ones(n_out)</TD><TD>Mean or expected value(s) of the random signal(s)</TD></TR>
<TR><TD>Real</TD><TD>sigma[size(mu, 1)]</TD><TD>0.5*ones(n_out)</TD><TD>Standard deviation(s) of the random signal(s)</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Advanced</TD></TR>
<TR><TD>Integer</TD><TD>n_s</TD><TD>500</TD><TD>Number of samples</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> RandomNormal <font color="darkgreen">
  &quot;Generate a sequence of normal (Gaussian) random numbers&quot;</font>
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A>;
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A>(
      samplePeriod=0.002);
  <font color="blue">parameter </font>Real mu[:]=0*<font color="red">ones</font>(n_out) <font color="darkgreen">
    &quot;Mean or expected value(s) of the random signal(s)&quot;</font>;
  <font color="blue">parameter </font>Real sigma[<font color="red">size</font>(mu, 1)]=0.5*<font color="red">ones</font>(n_out) <font color="darkgreen">
    &quot;Standard deviation(s) of the random signal(s)&quot;</font>;
  <font color="darkgreen">// Note KLD 1/8/10: without annotation(Evaluate=true), Dymola doesn&#39;t seem to recognize internal_twister_uniform() when sigma=ones(n_out)</font>
  <font color="blue">parameter </font>Integer n_s=500 <font color="darkgreen">&quot;Number of samples&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">parameter </font>Real mu_internal[n_out]=(<font color="blue">if </font><font color="red">size</font>(mu, 1) == 1<font color="blue"> then </font>mu[1]*<font color="red">ones</font>(
      n_out)<font color="blue"> else </font>mu) <font color="darkgreen">
    &quot;Mean or expected value(s) of random signal(s), with entries for every signal&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real sigma_internal[n_out]=(<font color="blue">if </font><font color="red">size</font>(sigma, 1) == 1<font color="blue"> then </font>sigma[
      1]*<font color="red">ones</font>(n_out)<font color="blue"> else </font>sigma) <font color="darkgreen">
    &quot;Standard deviation(s) of random signal(s), with entries for every signal&quot;</font>;
  Real table[n_s, n_out](start=<font color="red">zeros</font>(n_s, n_out), fixed=true) <font color="darkgreen">
    &quot;Matrix of normal random numbers (the first column is time /s)&quot;</font>;

<font color="blue">equation </font>
  <font color="blue">when </font>firstTrigger<font color="blue"> then</font>
    <font color="darkgreen">// (Re)generate the table of random numbers</font>
    <font color="blue">for </font>i<font color="blue"> in </font>1:n_out<font color="blue"> loop</font>
      <font color="darkgreen">// random numbers</font>
      table[:, i] = <font color="red">FCSys.WorkInProgress.Blocks.BaseClasses.randn</font>(
        mu=mu_internal[i],
        sigma=sigma_internal[i],
        n=n_s);
    <font color="blue">end for</font>;
  <font color="blue">end when</font>;
  <font color="darkgreen">// Read data from table</font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    y[:] = table[<font color="red">mod</font>(<font color="red">integer</font>(time/samplePeriod), n_s) + 1, :];
  <font color="blue">end when</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>RandomNormal;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE RandomUniform<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomUniformI.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomUniform" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomUniform"></A><A HREF="FCSys_WorkInProgress_Blocks_Discrete_Sources.html#FCSys.WorkInProgress.Blocks.Discrete.Sources"
>FCSys.WorkInProgress.Blocks.Discrete.Sources</A>.RandomUniform</H2>
<B>Generate a sequence of uniform random numbers</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomNormalD.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sources.RandomUniform">
<P><H3>Information</H3></P>
<PRE></pre><p>The values of the sequence are uniformly distributed over the range <code>[x_min, x_max)</code>. The random numbers are (re)generated at the start of every simulation.</p>

<p>Be sure to set <code>n_s</code> to be greater than or equal to the number of sample periods during the simulation.  Otherwise, the sequence will be periodic over the simulation (i.e., it will repeat).</p>

<p>The model generates uniform random numbers using <code>internal_twister_uniform()</code>.  This function uses the Mersenne twister pseudorandom number generator and its implementation is specific to Dymola (i.e., not general to Modelica).</p><pre></PRE><P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A> (Multiple Output block), <A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A> (Base class of discrete blocks).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>1</TD><TD>Number of outputs</TD></TR>
<TR><TD>&nbsp;</TD><TD>samplePeriod</TD><TD>0.002</TD><TD>Sample period of species</TD></TR>
<TR><TD>&nbsp;</TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant</TD></TR>
<TR><TD>Real</TD><TD>x_min[:]</TD><TD>-0.5*ones(n_out)</TD><TD>Lower bound(s) of the random signal(s)</TD></TR>
<TR><TD>Real</TD><TD>x_max[size(x_min, 1)]</TD><TD>0.5*ones(n_out)</TD><TD>Upper bound(s) of the random signal(s)</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Advanced</TD></TR>
<TR><TD>Integer</TD><TD>n_s</TD><TD>500</TD><TD>Number of samples</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> RandomUniform <font color="darkgreen">&quot;Generate a sequence of uniform random numbers&quot;</font>
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A>;
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A>(
      samplePeriod=0.002);
  <font color="blue">parameter </font>Real x_min[:]=-0.5*<font color="red">ones</font>(n_out) <font color="darkgreen">
    &quot;Lower bound(s) of the random signal(s)&quot;</font>;
  <font color="blue">parameter </font>Real x_max[<font color="red">size</font>(x_min, 1)]=0.5*<font color="red">ones</font>(n_out) <font color="darkgreen">
    &quot;Upper bound(s) of the random signal(s)&quot;</font>;
  <font color="blue">parameter </font>Integer n_s=500 <font color="darkgreen">&quot;Number of samples&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">parameter </font>Real x_min_internal[n_out]=(<font color="blue">if </font><font color="red">size</font>(x_min, 1) == 1<font color="blue"> then </font><font color="red">ones</font>(
      n_out)*x_min[1]<font color="blue"> else </font>x_min) <font color="darkgreen">
    &quot;Lower bound(s) of random signal(s), with entries for every signal&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real x_max_internal[n_out]=(<font color="blue">if </font><font color="red">size</font>(x_max, 1) == 1<font color="blue"> then </font><font color="red">ones</font>(
      n_out)*x_max[1]<font color="blue"> else </font>x_max) <font color="darkgreen">
    &quot;Upper bound(s) of random signal(s), with entries for every signal&quot;</font>;
  Real table[n_s, n_out] <font color="darkgreen">&quot;Matrix of uniform random numbers&quot;</font>;

<font color="blue">equation </font>
  <font color="blue">when </font>firstTrigger<font color="blue"> then</font>
    <font color="darkgreen">// Check the min/max range</font>
    <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(x_min, 1)<font color="blue"> loop</font>
      <font color="red">assert</font>(x_min[i] &lt; x_max[i], &quot;Entry &quot; + <font color="red">String</font>(i) + &quot; of x_min is greater than that of x_max.&quot;);
    <font color="blue">end for</font>;
    <font color="darkgreen">// (Re)generate the table of random numbers</font>
    <font color="blue">for </font>i<font color="blue"> in </font>1:n_out<font color="blue"> loop</font>
      <font color="darkgreen">// random numbers</font>
      table[:, i] = <font color="red">FCSys.WorkInProgress.Blocks.BaseClasses.randu</font>(
        x_min=x_min_internal[i],
        x_max=x_max_internal[i],
        n=n_s);
    <font color="blue">end for</font>;
  <font color="blue">end when</font>;
  <font color="darkgreen">// Read data from table</font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    y[:] = table[<font color="red">mod</font>(<font color="red">integer</font>(time/samplePeriod), n_s) + 1, :];
  <font color="blue">end when</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>RandomUniform;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.Dymola.com/">Dymola</a> Fri Mar 22 01:14:30 2013.
</address></BODY>
</HTML>
