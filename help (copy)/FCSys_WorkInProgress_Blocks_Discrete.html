<HTML>
<HEAD>
<TITLE>FCSys.WorkInProgress.Blocks.Discrete</TITLE>
<META name="HTML-Generator" content="Dymola">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Discrete<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.WorkInProgress.Blocks.Discrete"></A><A HREF="FCSys_WorkInProgress_Blocks.html#FCSys.WorkInProgress.Blocks"
>FCSys.WorkInProgress.Blocks</A>.Discrete</H2>
<P><H3>Information</H3></P>
Extends from <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.ExamplesS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Examples" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete_Examples.html#FCSys.WorkInProgress.Blocks.Discrete.Examples"
>Examples</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.ControllersS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Controllers" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete_Controllers.html#FCSys.WorkInProgress.Blocks.Discrete.Controllers"
>Controllers</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.ControllersS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Observers" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete_Observers.html#FCSys.WorkInProgress.Blocks.Discrete.Observers"
>Observers</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.ControllersS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Plants" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete_Plants.html#FCSys.WorkInProgress.Blocks.Discrete.Plants"
>Plants</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.SourcesS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sources" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete_Sources.html#FCSys.WorkInProgress.Blocks.Discrete.Sources"
>Sources</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.ZeroOrderHoldS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.ZeroOrderHold" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete.ZeroOrderHold"
>ZeroOrderHold</A>
</TD><TD>Zero order hold of a sampled-data system</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.FirstOrderHoldS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.FirstOrderHold" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete.FirstOrderHold"
>FirstOrderHold</A>
</TD><TD>First order hold of a sampled-data system</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.TransportFunctionS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.TransportFunction" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete.TransportFunction"
>TransportFunction</A>
</TD><TD>Discrete Transport Function block</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.UnitDelayS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.UnitDelay" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete.UnitDelay"
>UnitDelay</A>
</TD><TD>Unit Delay Block</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.SamplerS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sampler" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete.Sampler"
>Sampler</A>
</TD><TD>Ideal sampling of continuous signals</TD></TR>
<TR><TD><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.BaseClassesS.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.BaseClasses" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses"
>BaseClasses</A>
</TD><TD>Base classes (not generally for direct use)</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ZeroOrderHold<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.ZeroOrderHoldI.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.ZeroOrderHold" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Discrete.ZeroOrderHold"></A><A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete"
>FCSys.WorkInProgress.Blocks.Discrete</A>.ZeroOrderHold</H2>
<B>Zero order hold of a sampled-data system</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.ZeroOrderHoldD.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.ZeroOrderHold">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
The output is identical to the sampled input signal at sample
time instants and holds the output at the value of the last
sample instant during the sample points.
</p>
<pre>
</PRE><P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A> (Multiple Input block), <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A> (Multiple Output block), <A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A> (Base class of discrete blocks).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>n_in</TD><TD>n</TD><TD>Number of inputs</TD></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>n</TD><TD>Number of outputs</TD></TR>
<TR><TD>&nbsp;</TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of species</TD></TR>
<TR><TD>&nbsp;</TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant</TD></TR>
<TR><TD>Real</TD><TD>y_0[:]</TD><TD>zeros(1)</TD><TD>Initial value of output signal</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealInput"
>RealInput</A></TD><TD>u[n_in]</TD><TD>Connector of Real input signals</TD></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> ZeroOrderHold <font color="darkgreen">&quot;Zero order hold of a sampled-data system&quot;</font>
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A>(<font color="blue">final </font>n_in=n);
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A>(<font color="blue">final </font>n_out=n);
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A>;
  <font color="blue">output </font>Real y_sample[n](start=y_0, fixed=true);
  <font color="blue">parameter </font>Real y_0[:]=<font color="red">zeros</font>(1) <font color="darkgreen">&quot;Initial value of output signal&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Integer n=<font color="red">size</font>(y_0, 1) <font color="darkgreen">&quot;Number of signals&quot;</font>;

<font color="blue">equation </font>
  <font color="blue">when </font>{sampleTrigger,<font color="red">initial</font>()}<font color="blue"> then</font>
    y_sample = u;
  <font color="blue">end when</font>;
  <font color="darkgreen">/* Define y=y_sample with an infinitesimal delay to break potential
       algebraic loops if both the continuous and the discrete part have
       direct feedthrough
    */</font>
  y = <font color="red">pre</font>(y_sample);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ZeroOrderHold;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE FirstOrderHold<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.FirstOrderHoldI.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.FirstOrderHold" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Discrete.FirstOrderHold"></A><A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete"
>FCSys.WorkInProgress.Blocks.Discrete</A>.FirstOrderHold</H2>
<B>First order hold of a sampled-data system</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.ZeroOrderHoldD.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.FirstOrderHold">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
The output signal is the extrapolation through the
values of the last two sampled input signals.
</p>
<pre>
</PRE><P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A> (Multiple Input block), <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A> (Multiple Output block), <A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A> (Base class of discrete blocks).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>n_in</TD><TD>n</TD><TD>Number of inputs</TD></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>n</TD><TD>Number of outputs</TD></TR>
<TR><TD>&nbsp;</TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of species</TD></TR>
<TR><TD>&nbsp;</TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant</TD></TR>
<TR><TD>Integer</TD><TD>n</TD><TD>1</TD><TD>Number of signals</TD></TR>
<TR><TD>Real</TD><TD>y_0[n]</TD><TD>zeros(n)</TD><TD>Initial condition of input</TD></TR>
<TR><TD>Real</TD><TD>c0[n]</TD><TD>zeros(n)</TD><TD>Initial condition of Delta_y/Delta_t</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealInput"
>RealInput</A></TD><TD>u[n_in]</TD><TD>Connector of Real input signals</TD></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> FirstOrderHold <font color="darkgreen">&quot;First order hold of a sampled-data system&quot;</font>
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A>(<font color="blue">final </font>n_in=n);
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A>(<font color="blue">final </font>n_out=n);
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A>;
  <font color="blue">parameter </font>Integer n=1 <font color="darkgreen">&quot;Number of signals&quot;</font>;
  <font color="blue">parameter </font>Real y_0[n]=<font color="red">zeros</font>(n) <font color="darkgreen">&quot;Initial condition of input&quot;</font>;
  <font color="blue">parameter </font>Real c0[n]=<font color="red">zeros</font>(n) <font color="darkgreen">&quot;Initial condition of Delta_y/Delta_t&quot;</font>;

<font color="blue">protected </font>
  Real y_sample[n](start=y_0,fixed=true);
  <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> t_sample;
  Real c[n](start=c0,fixed=true) <font color="darkgreen">&quot;Delta_y/Delta_t&quot;</font>;

<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    y_sample = u;
    t_sample = time;
    <font color="darkgreen">//    c = if firstTrigger then zeros(N) else (y_sample - pre(y_sample))/</font>
    <font color="darkgreen">//      samplePeriod;</font>
    c = (y_sample - <font color="red">pre</font>(y_sample))/samplePeriod;
  <font color="blue">end when</font>;
  <font color="darkgreen">/* Use pre(y_sample) and pre(c) to break potential algebraic loops by an
       infinitesimal delay if both the continuous and the discrete part
       have direct feedthrough.
    */</font>
  y = <font color="red">pre</font>(y_sample) + <font color="red">pre</font>(c)*(time - t_sample);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>FirstOrderHold;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TransportFunction<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.TransportFunctionI.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.TransportFunction" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Discrete.TransportFunction"></A><A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete"
>FCSys.WorkInProgress.Blocks.Discrete</A>.TransportFunction</H2>
<B>Discrete Transport Function block</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.TransportFunctionD.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.TransportFunction">
<P><H3>Information</H3></P>
<PRE></pre>
<p>The <b>discrete transport function</b> block defines the
transport function between the input signal u and the output
signal y. The numerator has the order nb-1, the denominator
has the order na-1.</p>
<pre>          b(1)*z^(n_b-1) + b(2)*z^(n_b-2) + &hellip; + b(n_b)
   y(z) = -------------------------------------------- * u(z)
          a(1)*z^(na-1) + a(2)*z^(na-2) + &hellip; + a(na)
</pre>
<p>State variables <b>x</b> are defined according to
<b>controller canonical</b> form. Initial values of the
states can be set as start values of <b>x</b>.<p>
<p>Example:</p>
<pre>     Blocks.Discrete.TransportFunction g(b = {2,4}, a = {1,3});
</pre>
<p>results in the following transport function:</p>
<pre>        2*z + 4
   y = --------- * u
         z + 3
</pre>

<pre>
</PRE><P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A> (Multiple Input block), <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A> (Multiple Output block), <A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A> (Base class of discrete blocks).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>b[:]</TD><TD>{1}</TD><TD>Numerator coefficients of transport function.</TD></TR>
<TR><TD>Real</TD><TD>a[:]</TD><TD>&nbsp;</TD><TD>Denominator coefficients of transport function.</TD></TR>
<TR><TD>Integer</TD><TD>n_in</TD><TD>n</TD><TD>Number of inputs</TD></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>n</TD><TD>Number of outputs</TD></TR>
<TR><TD>&nbsp;</TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of species</TD></TR>
<TR><TD>&nbsp;</TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant</TD></TR>
<TR><TD>Integer</TD><TD>n</TD><TD>1</TD><TD>Number of signals</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealInput"
>RealInput</A></TD><TD>u[n_in]</TD><TD>Connector of Real input signals</TD></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> TransportFunction <font color="darkgreen">&quot;Discrete Transport Function block&quot;</font>
  <font color="blue">parameter </font>Real b[:]={1} <font color="darkgreen">&quot;Numerator coefficients of transport function.&quot;</font>;
  <font color="blue">parameter </font>Real a[:] <font color="darkgreen">&quot;Denominator coefficients of transport function.&quot;</font>;
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A>(<font color="blue">final </font>n_in=n);
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A>(<font color="blue">final </font>n_out=n);
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A>;
  <font color="blue">output </font>Real x[<font color="red">size</font>(a, 1) - 1, n](<font color="blue">each </font>start=0,<font color="blue">each </font>fixed=true) <font color="darkgreen">
    &quot;State of transport function from controller canonical form&quot;</font>;
  <font color="blue">parameter </font>Integer n=1 <font color="darkgreen">&quot;Number of signals&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer n_b=<font color="red">size</font>(b, 1) <font color="darkgreen">&quot;Size of Numerator of transport function&quot;</font>;
  <font color="blue">parameter </font>Integer n_a=<font color="red">size</font>(a, 1) <font color="darkgreen">&quot;Size of Denominator of transport function&quot;</font>;
  Real x_1[n];
  Real x_ext[<font color="red">size</font>(a, 1), n];

<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    <font color="darkgreen">/* State variables x are defined according to
       controller canonical form. */</font>
    <font color="blue">for </font>i<font color="blue"> in </font>1:n<font color="blue"> loop</font>
      x_1[i] = (u[i] - a[2:<font color="red">size</font>(a, 1)]*<font color="red">pre</font>(x[:, i]))/a[1];
      x_ext[:, i] = <font color="red">vector</font>([x_1[i]; <font color="red">pre</font>(x[:, i])]);
      x[:, i] = x_ext[1:<font color="red">size</font>(x, 1), i];
      y[i] = <font color="red">vector</font>([<font color="red">zeros</font>(n_a - n_b, 1); b])*x_ext[:, i];
    <font color="blue">end for</font>;
  <font color="blue">end when</font>;
  <font color="darkgreen">/* This is a non-sampled equation and above there are two separate
       when-clauses. This breaks feedback loops without direct terms,
       since in that case y will be independent of x_1 (and only dependent
       on pre(x)).
    */</font>
  <font color="darkgreen">/* Corresponding (simpler) version using when-semantics of Modelica 1.3:

   equation
     when sampleTrigger then
      [x; xn] = [x_1; pre(x)];
      [u] = transpose([a])*[x_1; pre(x)];
      [y] = transpose([zeros(n_a - n_b, 1); b])*[x_1; pre(x)];
     end when;
*/</font>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>TransportFunction;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE UnitDelay<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.UnitDelayI.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.UnitDelay" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Discrete.UnitDelay"></A><A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete"
>FCSys.WorkInProgress.Blocks.Discrete</A>.UnitDelay</H2>
<B>Unit Delay Block</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.UnitDelayD.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.UnitDelay">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This block describes a unit delay:
</p>
<pre>
          1
     y = --- * u
          z
</pre>
<p>
that is, the output signal y is the input signal u of the
previous sample instant. Before the second sample instant,
the output y is identical to parameter yStart.
</p>

<pre>
</PRE><P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A> (Multiple Input block), <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A> (Multiple Output block), <A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A> (Base class of discrete blocks).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y_0[:]</TD><TD>zeros(1)</TD><TD>Initial value of output signal</TD></TR>
<TR><TD>Integer</TD><TD>n_in</TD><TD>n</TD><TD>Number of inputs</TD></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>n</TD><TD>Number of outputs</TD></TR>
<TR><TD>&nbsp;</TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of species</TD></TR>
<TR><TD>&nbsp;</TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> UnitDelay <font color="darkgreen">&quot;Unit Delay Block&quot;</font>
  <font color="blue">parameter </font>Real y_0[:]=<font color="red">zeros</font>(1) <font color="darkgreen">&quot;Initial value of output signal&quot;</font>;
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A>(<font color="blue">final </font>n_in=n, u(<font color="blue">final </font>
        start=y_0, <font color="blue">each </font>fixed=true));
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A>(<font color="blue">final </font>n_out=n);
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A>;
  <font color="blue">final </font><font color="blue">parameter </font>Integer n=<font color="red">size</font>(y_0, 1) <font color="darkgreen">&quot;Number of signals&quot;</font>;

<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    y = <font color="red">pre</font>(u);
  <font color="blue">end when</font>;

<font color="blue">initial </font><font color="blue">equation </font>
  <font color="darkgreen">//  y = y_0;</font>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>UnitDelay;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Sampler<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.SamplerI.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sampler" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.WorkInProgress.Blocks.Discrete.Sampler"></A><A HREF="FCSys_WorkInProgress_Blocks_Discrete.html#FCSys.WorkInProgress.Blocks.Discrete"
>FCSys.WorkInProgress.Blocks.Discrete</A>.Sampler</H2>
<B>Ideal sampling of continuous signals</B><p>
<IMG SRC="FCSys.WorkInProgress.Blocks.Discrete.SamplerD.png" ALT="FCSys.WorkInProgress.Blocks.Discrete.Sampler">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Samples the continues input signal with a sampling rate defined
via parameter <b>samplePeriod</b>.
</p>
<pre>
</PRE><P>
Extends from <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A> (Multiple Input block), <A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A> (Multiple Output block), <A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A> (Base class of discrete blocks).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>n_in</TD><TD>n</TD><TD>Number of inputs</TD></TR>
<TR><TD>Integer</TD><TD>n_out</TD><TD>n</TD><TD>Number of outputs</TD></TR>
<TR><TD>&nbsp;</TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of species</TD></TR>
<TR><TD>&nbsp;</TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant</TD></TR>
<TR><TD>Integer</TD><TD>n</TD><TD>1</TD><TD>Number of signals</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealInput"
>RealInput</A></TD><TD>u[n_in]</TD><TD>Connector of Real input signals</TD></TR>
<TR><TD>output <A HREF="FCSys_Connectors.html#FCSys.Connectors.RealOutput"
>RealOutput</A></TD><TD>y[n_out]</TD><TD>Connector of Real output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> Sampler <font color="darkgreen">&quot;Ideal sampling of continuous signals&quot;</font>
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MI"
>FCSys.WorkInProgress.Blocks.BaseClasses.MI</A>(<font color="blue">final </font>n_in=n);
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_BaseClasses.html#FCSys.WorkInProgress.Blocks.BaseClasses.MO"
>FCSys.WorkInProgress.Blocks.BaseClasses.MO</A>(<font color="blue">final </font>n_out=n);
  <font color="blue">extends </font><A HREF="FCSys_WorkInProgress_Blocks_Discrete_BaseClasses.html#FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock"
>FCSys.WorkInProgress.Blocks.Discrete.BaseClasses.DiscreteBlock</A>;
  <font color="blue">parameter </font>Integer n=1 <font color="darkgreen">&quot;Number of signals&quot;</font>;

<font color="blue">equation </font>
  <font color="blue">when </font>{sampleTrigger,<font color="red">initial</font>()}<font color="blue"> then</font>
    y = u;
  <font color="blue">end when</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Sampler;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.Dymola.com/">Dymola</a> Fri Mar 22 00:07:51 2013.
</address></BODY>
</HTML>
