<HTML>
<HEAD>
<TITLE>FCSys.Test</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Library to facilitate assertion-based testing of Modelica code&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Test<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.Test"></A><A HREF="FCSys.html#FCSys"
>FCSys</A>.Test</H2>
<B>Library to facilitate assertion-based testing of Modelica code</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre><p>This package is modified from
  XogenyTest version 1.1 by Michael Tiller of Xogeny, Inc.  XogenyTest is available at
  <a href="https://github.com/xogeny/XogenyTest">https://github.com/xogeny/XogenyTest</a> under
  a <a href="https://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons
  Attribution 3.0 Unported License</a>.  If the <A HREF="FCSys_Tests.html#FCSys.Tests"
>Tests</a>
  package is removed from the <A HREF="FCSys.html#FCSys"
>FCSys</a> distribution, then this
  package can be safely removed as well.
  </p><pre></PRE><P>
Extends from <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="FCSys.BaseClasses.Utilities.Chemistry.stoichS.png" ALT="FCSys.Test.assertValue" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Test.html#FCSys.Test.assertValue"
>assertValue</A>
</TD><TD>Assert that a value is within specification</TD></TR>
<TR><TD><IMG SRC="FCSys.BaseClasses.Utilities.Chemistry.stoichS.png" ALT="FCSys.Test.assertValues" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Test.html#FCSys.Test.assertValues"
>assertValues</A>
</TD><TD>Assert that values are within specification</TD></TR>
<TR><TD><IMG SRC="FCSys.BaseClasses.Utilities.Chemistry.stoichS.png" ALT="FCSys.Test.assertLogValue" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Test.html#FCSys.Test.assertLogValue"
>assertLogValue</A>
</TD><TD>Assert that a value is within orders of magnitude of specification</TD></TR>
<TR><TD><IMG SRC="FCSys.BaseClasses.Utilities.Chemistry.stoichS.png" ALT="FCSys.Test.assertLogValues" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Test.html#FCSys.Test.assertLogValues"
>assertLogValues</A>
</TD><TD>Assert that values are within orders of magnitude of specification</TD></TR>
<TR><TD><A HREF="FCSys_Test.html#FCSys.Test.AssertTrajectory"
>AssertTrajectory</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="FCSys_Test.html#FCSys.Test.AssertBecomesTrueAt"
>AssertBecomesTrueAt</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="FCSys_Test.html#FCSys.Test.AssertInitial"
>AssertInitial</A>
</TD><TD>Assert the initial value of a signal</TD></TR>
<TR><TD><A HREF="FCSys_Test.html#FCSys.Test.AssertFinal"
>AssertFinal</A>
</TD><TD>Assert the final value of a signal</TD></TR>
<TR><TD><A HREF="FCSys_Test.html#FCSys.Test.AssertAverageBetween"
>AssertAverageBetween</A>
</TD><TD>Assert an average value between two times.</TD></TR>
<TR><TD><A HREF="FCSys_Test.html#FCSys.Test.AssertValueAt"
>AssertValueAt</A>
</TD><TD>Assert the initial value of a signal at a specific time</TD></TR>
<TR><TD><IMG SRC="FCSys.Test.TestsS.png" ALT="FCSys.Test.Tests" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Test_Tests.html#FCSys.Test.Tests"
>Tests</A>
</TD><TD>A library to test the assertion primitives in this library</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE assertValue<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.Test.assertValueI.png" ALT="FCSys.Test.assertValue" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.Test.assertValue"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.assertValue</H2>
<B>Assert that a value is within specification</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>actual</TD><TD>&nbsp;</TD><TD>Actual value</TD></TR>
<TR><TD>Real</TD><TD>expected</TD><TD>&nbsp;</TD><TD>Expected value</TD></TR>
<TR><TD>Real</TD><TD>eps</TD><TD>1e-7</TD><TD>Error tolerance</TD></TR>
<TR><TD>String</TD><TD>name</TD><TD>&quot;&quot;</TD><TD>Name of test</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> assertValue <font color="darkgreen">&quot;Assert that a value is within specification&quot;</font>
  <font color="blue">extends </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

  <font color="blue">input </font>Real actual <font color="darkgreen">&quot;Actual value&quot;</font>;
  <font color="blue">input </font>Real expected <font color="darkgreen">&quot;Expected value&quot;</font>;
  <font color="blue">input </font>Real eps=1e-7 <font color="darkgreen">&quot;Error tolerance&quot;</font>;
  <font color="blue">input </font>String name=&quot;&quot; <font color="darkgreen">&quot;Name of test&quot;</font>;

<font color="blue">algorithm </font>
  <font color="red">assert</font>(<font color="red">abs</font>(actual - expected) &lt;= eps, (<font color="blue">if </font>name &lt;&gt; &quot;&quot;<font color="blue"> then </font>&quot;Test &quot; + name + &quot; failed.\n&quot;<font color="blue">
     else </font>&quot;&quot;) + &quot;The actual value (&quot; + <font color="red">String</font>(actual) + &quot;) was not within &quot; + <font color="red">
    String</font>(eps) + &quot; of the expected value (&quot; + <font color="red">String</font>(expected) + &quot;).&quot;);

<font color="blue">end </font>assertValue;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE assertValues<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.Test.assertValueI.png" ALT="FCSys.Test.assertValues" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.Test.assertValues"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.assertValues</H2>
<B>Assert that values are within specification</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>actual[:]</TD><TD>&nbsp;</TD><TD>Actual values</TD></TR>
<TR><TD>Real</TD><TD>expected[size(actual, 1)]</TD><TD>&nbsp;</TD><TD>Expected values</TD></TR>
<TR><TD>Real</TD><TD>eps</TD><TD>1e-7</TD><TD>Error tolerance</TD></TR>
<TR><TD>String</TD><TD>name</TD><TD>&quot;&quot;</TD><TD>Name of test</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> assertValues <font color="darkgreen">&quot;Assert that values are within specification&quot;</font>
  <font color="blue">extends </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

  <font color="blue">input </font>Real actual[:] <font color="darkgreen">&quot;Actual values&quot;</font>;
  <font color="blue">input </font>Real expected[<font color="red">size</font>(actual, 1)] <font color="darkgreen">&quot;Expected values&quot;</font>;
  <font color="blue">input </font>Real eps=1e-7 <font color="darkgreen">&quot;Error tolerance&quot;</font>;
  <font color="blue">input </font>String name=&quot;&quot; <font color="darkgreen">&quot;Name of test&quot;</font>;

<font color="blue">algorithm </font>
  <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(actual, 1)<font color="blue"> loop</font>
    <font color="red">assert</font>(<font color="red">abs</font>(actual[i] - expected[i]) &lt;= eps, &quot;Test &quot; + <font color="red">String</font>(i) + (<font color="blue">if </font>name &lt;&gt; &quot;&quot;<font color="blue">
       then </font>&quot; of &quot; + name<font color="blue"> else </font>&quot;&quot;) + &quot; failed.\n&quot; + &quot;The actual value (&quot; + <font color="red">
      String</font>(actual[i]) + &quot;) was not within &quot; + <font color="red">String</font>(eps) + &quot; of the expected value (&quot;
       + <font color="red">String</font>(expected[i]) + &quot;).&quot;);
  <font color="blue">end for</font>;

<font color="blue">end </font>assertValues;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE assertLogValue<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.Test.assertValueI.png" ALT="FCSys.Test.assertLogValue" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.Test.assertLogValue"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.assertLogValue</H2>
<B>Assert that a value is within orders of magnitude of specification</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>actual</TD><TD>&nbsp;</TD><TD>Actual value</TD></TR>
<TR><TD>Real</TD><TD>expected</TD><TD>&nbsp;</TD><TD>Expected value</TD></TR>
<TR><TD>Real</TD><TD>o</TD><TD>1</TD><TD>Error tolerance in orders of magnitude</TD></TR>
<TR><TD>String</TD><TD>name</TD><TD>&quot;&quot;</TD><TD>Name of test</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> assertLogValue <font color="darkgreen">
  &quot;Assert that a value is within orders of magnitude of specification&quot;</font>
  <font color="blue">import </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Math.html#Modelica.Math.log10"
>Modelica.Math.log10</A>;
  <font color="blue">import </font>Modelica.Constants.small;
  <font color="blue">extends </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

  <font color="blue">input </font>Real actual <font color="darkgreen">&quot;Actual value&quot;</font>;
  <font color="blue">input </font>Real expected <font color="darkgreen">&quot;Expected value&quot;</font>;
  <font color="blue">input </font>Real o=1 <font color="darkgreen">&quot;Error tolerance in orders of magnitude&quot;</font>;
  <font color="blue">input </font>String name=&quot;&quot; <font color="darkgreen">&quot;Name of test&quot;</font>;

<font color="blue">algorithm </font>
  <font color="red">assert</font>((<font color="red">abs</font>(actual) &lt; small<font color="blue"> and </font><font color="red">abs</font>(expected) &lt; small)<font color="blue"> or </font><font color="red">abs</font>(<font color="red">log10</font>(actual/
    expected)) &lt;= o, (<font color="blue">if </font>name &lt;&gt; &quot;&quot;<font color="blue"> then </font>&quot;Test &quot; + name + &quot; failed.\n&quot;<font color="blue"> else </font>&quot;&quot;) + &quot;The actual value (&quot;
     + <font color="red">String</font>(actual) + &quot;) was not within &quot; + <font color="red">String</font>(o) + &quot; orders of magnitude of the expected value (&quot;
     + <font color="red">String</font>(expected) + &quot;).&quot;);

<font color="blue">end </font>assertLogValue;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE assertLogValues<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.Test.assertValueI.png" ALT="FCSys.Test.assertLogValues" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.Test.assertLogValues"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.assertLogValues</H2>
<B>Assert that values are within orders of magnitude of specification</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>actual[:]</TD><TD>&nbsp;</TD><TD>Actual values</TD></TR>
<TR><TD>Real</TD><TD>expected[size(actual, 1)]</TD><TD>&nbsp;</TD><TD>Expected values</TD></TR>
<TR><TD>Real</TD><TD>o</TD><TD>1</TD><TD>Error tolerance in orders of magnitude</TD></TR>
<TR><TD>String</TD><TD>name</TD><TD>&quot;&quot;</TD><TD>Name of test</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> assertLogValues <font color="darkgreen">
  &quot;Assert that values are within orders of magnitude of specification&quot;</font>
  <font color="blue">import </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Math.html#Modelica.Math.log10"
>Modelica.Math.log10</A>;
  <font color="blue">import </font>Modelica.Constants.small;
  <font color="blue">extends </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

  <font color="blue">input </font>Real actual[:] <font color="darkgreen">&quot;Actual values&quot;</font>;
  <font color="blue">input </font>Real expected[<font color="red">size</font>(actual, 1)] <font color="darkgreen">&quot;Expected values&quot;</font>;
  <font color="blue">input </font>Real o=1 <font color="darkgreen">&quot;Error tolerance in orders of magnitude&quot;</font>;
  <font color="blue">input </font>String name=&quot;&quot; <font color="darkgreen">&quot;Name of test&quot;</font>;

<font color="blue">algorithm </font>
  <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(actual, 1)<font color="blue"> loop</font>
    <font color="red">assert</font>((<font color="red">abs</font>(actual[i]) &lt; small<font color="blue"> and </font><font color="red">abs</font>(expected[i]) &lt; small)<font color="blue"> or </font><font color="red">abs</font>(<font color="red">log10</font>(
      actual[i]/expected[i])) &lt;= o, &quot;Test &quot; + <font color="red">String</font>(i) + (<font color="blue">if </font>name &lt;&gt; &quot;&quot;<font color="blue"> then </font>&quot; of &quot;
       + name<font color="blue"> else </font>&quot;&quot;) + &quot; failed.\n&quot; + &quot;The actual value (&quot; + <font color="red">String</font>(actual[i])
       + &quot;) was not within &quot; + <font color="red">String</font>(o) + &quot; orders of magnitude of the expected value (&quot;
       + <font color="red">String</font>(expected[i]) + &quot;).&quot;);
  <font color="blue">end for</font>;

<font color="blue">end </font>assertLogValues;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AssertTrajectory<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.Test.AssertTrajectory"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.AssertTrajectory</H2>
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>expected[:, 2]</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>eps</TD><TD>1e-6</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> AssertTrajectory
  <font color="blue">parameter </font>Real expected[:, 2];
  <font color="blue">parameter </font>Real eps=1e-6;
  <font color="blue">input </font>Real actual;

<font color="blue">protected </font>
  Integer cur(start=1,fixed=true);

<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">initial</font>()<font color="blue"> then</font>
    <font color="red">assert</font>(<font color="red">size</font>(expected, 1) &gt; 0, &quot;The expected trajectory contains no points.&quot;);
    <font color="red">assert</font>(expected[1, 1] &gt;= time, &quot;Some trajectory points precede the simulation.&quot;);
    cur := 1;
    <font color="blue">if </font>(expected[1, 1] &gt;= time<font color="blue"> and </font>expected[1, 1] &lt;= time)<font color="blue"> then</font>
      <font color="red">assertValue</font>(
        actual,
        expected[cur, 2],
        eps);
      cur := 2;
    <font color="blue">end if</font>;
  <font color="blue">end when</font>;
  <font color="blue">when </font>cur &lt;= <font color="red">size</font>(expected, 1)<font color="blue"> and </font>time &gt;= expected[cur, 1]<font color="blue"> then</font>
    <font color="red">assertValue</font>(
      actual,
      expected[cur, 2],
      eps);
    cur := <font color="red">pre</font>(cur) + 1;
  <font color="blue">end when</font>;
  <font color="blue">when </font><font color="red">terminal</font>()<font color="blue"> then</font>
    <font color="red">assert</font>(cur &gt; <font color="red">size</font>(expected, 1), &quot;The simulation ended before all trajectory points could be checked.&quot;);
    <font color="darkgreen">// Note:  In Dymola 7.4, the simulation log may state &quot;Integration</font>
    <font color="darkgreen">// terminated successfully&quot; and then the assertion statement below it.</font>
  <font color="blue">end when</font>;

<font color="blue">end </font>AssertTrajectory;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AssertBecomesTrueAt<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.Test.AssertBecomesTrueAt"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.AssertBecomesTrueAt</H2>
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>at</TD><TD>&nbsp;</TD><TD>[s]</TD></TR>
<TR><TD><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>eps</TD><TD>1e-6</TD><TD>[s]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> AssertBecomesTrueAt
  <font color="blue">parameter </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> at;
  <font color="blue">parameter </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> eps=1e-6;
  <font color="blue">input </font>Boolean event;

<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">initial</font>()<font color="blue"> then</font>
    <font color="red">assert</font>(at &gt; time + eps, &quot;The expected crossing time is before the start of the simulation.&quot;);
  <font color="blue">end when</font>;
  <font color="blue">when </font>time &gt;= at - eps<font color="blue"> then</font>
    <font color="red">assert</font>(<font color="blue">not </font>event, &quot;The signal became true before expected crossing time.&quot;);
  <font color="blue">end when</font>;
  <font color="blue">when </font>time &gt;= at + eps<font color="blue"> then</font>
    <font color="red">assert</font>(event, &quot;The signal was not true by the expected crossing time.&quot;);
  <font color="blue">end when</font>;
  <font color="blue">when </font><font color="red">terminal</font>()<font color="blue"> then</font>
    <font color="red">assert</font>(time &gt;= at + eps, &quot;The expected crossing time is after the end of the simulation.&quot;);
    <font color="darkgreen">// Note:  In Dymola 7.4, the simulation log may state &quot;Integration</font>
    <font color="darkgreen">// terminated successfully&quot; and then the assertion statement below it.</font>
  <font color="blue">end when</font>;

<font color="blue">end </font>AssertBecomesTrueAt;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AssertInitial<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.Test.AssertInitial"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.AssertInitial</H2>
<B>Assert the initial value of a signal</B><p>
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>expected</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>eps</TD><TD>1e-6</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> AssertInitial <font color="darkgreen">&quot;Assert the initial value of a signal&quot;</font>
  <font color="blue">parameter </font>Real expected;
  <font color="blue">parameter </font>Real eps=1e-6;
  <font color="blue">input </font>Real actual;

<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">initial</font>()<font color="blue"> then</font>
    <font color="red">assertValue</font>(
      actual,
      expected,
      eps);
  <font color="blue">end when</font>;

<font color="blue">end </font>AssertInitial;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AssertFinal<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.Test.AssertFinal"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.AssertFinal</H2>
<B>Assert the final value of a signal</B><p>
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>expected</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>eps</TD><TD>1e-6</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> AssertFinal <font color="darkgreen">&quot;Assert the final value of a signal&quot;</font>
  <font color="blue">parameter </font>Real expected;
  <font color="blue">parameter </font>Real eps=1e-6;
  <font color="blue">input </font>Real actual;

<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">terminal</font>()<font color="blue"> then</font>
    <font color="red">assertValue</font>(
      actual,
      expected,
      eps);
    <font color="darkgreen">// Note:  In Dymola 7.4, the simulation log may state &quot;Integration</font>
    <font color="darkgreen">// terminated successfully&quot; and then the assertion statement below it.</font>
  <font color="blue">end when</font>;

<font color="blue">end </font>AssertFinal;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AssertAverageBetween<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.Test.AssertAverageBetween"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.AssertAverageBetween</H2>
<B>Assert an average value between two times.</B><p>
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>average</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>start</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>finish</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>eps</TD><TD>1e-6</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> AssertAverageBetween <font color="darkgreen">
  &quot;Assert an average value between two times.&quot;</font>
  <font color="blue">parameter </font>Real average;
  <font color="blue">parameter </font>Real start;
  <font color="blue">parameter </font>Real finish;
  <font color="blue">parameter </font>Real eps=1e-6;
  <font color="blue">input </font>Real signal;

<font color="blue">protected </font>
  Real integral;

<font color="blue">initial </font><font color="blue">equation </font>
  integral = 0;
  <font color="red">assert</font>(finish &gt; start, &quot;The end of interval must be after start of interval.&quot;);
  <font color="red">assert</font>(time &lt;= start, &quot;The simulation started after the interval.&quot;);

<font color="blue">equation </font>
  <font color="red">der</font>(integral) = <font color="blue">if </font>(time &lt; start)<font color="blue"> then </font>0<font color="blue"> else </font>signal;
  <font color="blue">when </font>time &gt;= finish<font color="blue"> then</font>
    <font color="red">assert</font>(<font color="red">abs</font>((integral/(finish - start)) - average) &lt; eps, &quot;The average value between times &quot;
       + <font color="red">String</font>(start) + &quot; and &quot; + <font color="red">String</font>(finish) + &quot; was &quot; + <font color="red">String</font>(average) + &quot; but should have been within &quot;
       + <font color="red">String</font>(eps) + &quot; of &quot; + <font color="red">String</font>(integral/(finish - start)) + &quot;.&quot;);
  <font color="blue">end when</font>;

<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">terminal</font>()<font color="blue"> then</font>
    <font color="red">assert</font>(time &gt;= finish, &quot;The simulation terminated before the interval was completed.&quot;);
    <font color="darkgreen">// Note:  In Dymola 7.4, the simulation log may state &quot;Integration</font>
    <font color="darkgreen">// terminated successfully&quot; and then the assertion statement below it.</font>
  <font color="blue">end when</font>;

<font color="blue">end </font>AssertAverageBetween;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AssertValueAt<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.Test.AssertValueAt"></A><A HREF="FCSys_Test.html#FCSys.Test"
>FCSys.Test</A>.AssertValueAt</H2>
<B>Assert the initial value of a signal at a specific time</B><p>
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>expected</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>at</TD><TD>&nbsp;</TD><TD>[s]</TD></TR>
<TR><TD>Real</TD><TD>eps</TD><TD>1e-6</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> AssertValueAt <font color="darkgreen">
  &quot;Assert the initial value of a signal at a specific time&quot;</font>
  <font color="blue">parameter </font>Real expected;
  <font color="blue">parameter </font><A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> at;
  <font color="blue">parameter </font>Real eps=1e-6;
  <font color="blue">input </font>Real actual;

<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">initial</font>()<font color="blue"> then</font>
    <font color="red">assert</font>(at &gt;= time, &quot;The specified time is before the start of the simulation.&quot;);
  <font color="blue">end when</font>;
  <font color="blue">when </font>time &gt;= at<font color="blue"> then</font>
    <font color="red">assertValue</font>(
      actual,
      expected,
      eps);
  <font color="blue">end when</font>;
  <font color="blue">when </font><font color="red">terminal</font>()<font color="blue"> then</font>
    <font color="red">assert</font>(time &gt;= at, &quot;The specified time is after the end of the simulation.&quot;);
    <font color="darkgreen">// Note:  In Dymola 7.4, the simulation log may state &quot;Integration</font>
    <font color="darkgreen">// terminated successfully&quot; and then the assertion statement below it.</font>
  <font color="blue">end when</font>;

<font color="blue">end </font>AssertValueAt;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.Dymola.com/">Dymola</a> Fri Mar 22 00:06:35 2013.
</address></BODY>
</HTML>
