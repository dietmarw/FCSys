<html>
<head>
<title>FCSys.Characteristics.BaseClasses</title>
<meta name="HTML-Generator" content="Dymola">
<meta name="description" content="Base classes (not for direct use)">
<meta name="keywords" content="Modelica, fuel cell, PEMFC, model">
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="stylesheets/ModelicaDoc.css">
<link rel="shortcut icon" href="../resources/documentation/favicon.ico">
<script type="text/javascript" src="javascripts/analytics.js"></script>
</head>
<body>
<div class="sidebar">
  <div class="sidebarwrapper">
  <a href="index.html"><p class="sidebar-title">FCSys</p></a>
  <p class="logo"><a href="index.html">
    <img src="images/icon.gif" class="logo" alt="Logo" width=150>
  </a></p>

  <h3>Table of Contents</h3>
    <ul>
    <li><a href="FCSys_UsersGuide.html">User's Guide</a></li>
    <li><a href="FCSys_BCs.html">BCs</a>**</li>
    <li><a href="FCSys_Sensors.html">Sensors</a>**</li>
    <li><a href="FCSys_Assemblies.html">Assemblies</a>**</li>
    <li><a href="FCSys_Regions.html">Regions</a>**</li>
    <li><a href="FCSys_Subregions.html">Subregions</a>**</li>
    <li><a href="FCSys_Connectors.html">Connectors</a>**</li>
    <li><a href="FCSys_Characteristics.html">Characteristics</a></li>
    <li><a href="FCSys_Units.html">Units</a></li>
    <li><a href="FCSys_Quantities.html">Quantities</a></li>
    <li><a href="FCSys_BaseClasses.html">BaseClasses</a></li>
    <li>**Please check back soon or contact kdavies4 at gmail.com.</li>
    </ul>

  <h3>Download</h3>
    <ul>
      <li>Latest: <a href="release/FCSys-2.0.zip" rel="nofollow">FCSys-2.0.zip</a> (**Check back soon.)</li>
    </ul>
  </div>
</div>

<div class="document">
  <div class="documentwrapper">
    <div class="bodywrapper">
      <div class="body">

<h2><a name="FCSys.Characteristics.BaseClasses"></a><a href="FCSys_Characteristics.html#FCSys.Characteristics">FCSys.Characteristics</a>.BaseClasses</h2>
<b>Base classes (not for direct use)</b>
<p>
<p><h3>Information</h3></p>
Extends from <a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons_BasesPackage.html#Modelica.Icons.BasesPackage">Modelica.Icons.BasesPackage</a> (Icon for packages containing base classes).
<p><h3>Package Content</h3><p>
<table border=1 cellspacing=0 cellpadding=2 >
<tr><th>Name</th><th>Description</th></tr>
<tr><td><img src="images/FCSys.Characteristics.C.GraphiteS.png" alt="FCSys.Characteristics.BaseClasses.CharacteristicNASA" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.CharacteristicNASA">CharacteristicNASA</a>
</td><td>Thermodynamic record with transport properties based on NASA CEA</td></tr>
<tr><td><img src="images/FCSys.Characteristics.C.GraphiteS.png" alt="FCSys.Characteristics.BaseClasses.Characteristic" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.Characteristic">Characteristic</a>
</td><td>Record for thermodynamic and resistive properties</td></tr>
<tr><td><a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.ReferenceEnthalpy">ReferenceEnthalpy</a>
</td><td>Enumeration defining the reference enthalpy of a species</td></tr>
</table>
<p><h3>Types and constants</h3>
<a name="FCSys.Characteristics.BaseClasses.ReferenceEnthalpy"></a><pre><font color="blue">type</font> ReferenceEnthalpy = <font color="blue">enumeration</font>(
    ZeroAt0K <font color="darkgreen">&quot;Enthalpy at 0 K is 0 (if no additional offset)&quot;</font>,
    ZeroAt25degC <font color="darkgreen">&quot;Enthalpy at 25 degC is 0 (if no additional offset)&quot;</font>,
    EnthalpyOfFormationAt25degC <font color="darkgreen">
      &quot;Enthalpy at 25 degC is the enthalpy of formation at 25 degC (if no additional offset)&quot;</font>)
  <font color="darkgreen">&quot;Enumeration defining the reference enthalpy of a species&quot;</font>;</pre><p>
<hr>

<h2><img src="images/FCSys.Characteristics.BaseClasses.CharacteristicNASAI.png" alt="FCSys.Characteristics.BaseClasses.CharacteristicNASA" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Characteristics.BaseClasses.CharacteristicNASA"></a><a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses">FCSys.Characteristics.BaseClasses</a>.CharacteristicNASA</h2>
<b>Thermodynamic record with transport properties based on NASA CEA</b><p>
<p><h3>Information</h3></p>
<p>The correlations for transport properties are available in
  [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">McBride1996</a>,
  <a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">McBride2002</a>]. For more information, see the
  <a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.Characteristic">Characteristic</a> record.</p><p>
Extends from <a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.Characteristic">FCSys.Characteristics.BaseClasses.Characteristic</a> (Record for thermodynamic and resistive properties).
<p><h3>Parameters</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>String</td><td>formula</td><td>&nbsp;</td><td>Chemical formula</td></tr>
<tr><td>String</td><td>phase</td><td>&nbsp;</td><td>Phase (e.g., &quot;gas&quot;)</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.MassSpecific">MassSpecific</a></td><td>m</td><td>&nbsp;</td><td>Specific mass [m/N]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.LengthSpecific">LengthSpecific</a></td><td>r</td><td>&nbsp;</td><td>Specific radius [l/N]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.PotentialChemical">PotentialChemical</a></td><td>Deltah0_f</td><td>&nbsp;</td><td>Enthalpy of formation at 298.15 K, <i>p</i>&deg; (&Delta;<i>h</i>&deg;<sub>f</sub>)</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.PotentialChemical">PotentialChemical</a></td><td>Deltah0</td><td>&nbsp;</td><td><i>h</i>&deg;(298.15 K) - <i>h</i>&deg;(0 K) (&Delta;<i>h</i>&deg;)</td></tr>
<tr><td>Real</td><td>b_c[size(T_lim_c, 1) - 1, :]</td><td>&nbsp;</td><td>Coefficients of specific heat capacity at <i>p</i>&deg; as a polynomial in <i>T</i> (<i>b</i><sub><i>c</i></sub>)</td></tr>
<tr><td>Real</td><td>B_c[size(T_lim_c, 1) - 1, 2]</td><td>&nbsp;</td><td>Integration constants for specific enthalpy and entropy (<i>B</i><sub><i>c</i></sub>)</td></tr>
<tr><td>Real</td><td>b_eta[size(T_lim_alpha, 1) - 1, 4]</td><td>&nbsp;</td><td>Constants in the NASA CEA correlation for viscosity</td></tr>
<tr><td>Real</td><td>b_lambda[size(T_lim_alpha, 1) - 1, 4]</td><td>&nbsp;</td><td>Constants in the NASA CEA correlation for thermal conductivity</td></tr>
</table>
<p><h3>Modelica definition</h3>
<pre>
<font color="blue">record</font> CharacteristicNASA <font color="darkgreen">
  &quot;Thermodynamic record with transport properties based on NASA CEA&quot;</font>

  <font color="blue">extends </font><a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.Characteristic">FCSys.Characteristics.BaseClasses.Characteristic</a>;

  <font color="blue">constant </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T_lim_alpha[:]={0,Modelica.Constants.inf} <font color="darkgreen">
    &quot;Temperature limits for the rows of b_eta and b_lambda&quot;</font>;
  <font color="blue">constant </font>Real b_eta[<font color="red">size</font>(T_lim_alpha, 1) - 1, 4] <font color="darkgreen">
    &quot;Constants in the NASA CEA correlation for viscosity&quot;</font>;
  <font color="blue">constant </font>Real b_lambda[<font color="red">size</font>(T_lim_alpha, 1) - 1, 4] <font color="darkgreen">
    &quot;Constants in the NASA CEA correlation for thermal conductivity&quot;</font>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.CharacteristicNASA.alpha_tau"><font color="blue">function</font> alpha_tau <font color="darkgreen">
    &quot;Fluidity as a function of temperature (&alpha;<sub>&tau;</sub>)&quot;</font>

    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Resistivity">Q.Resistivity</a> alpha_tau <font color="darkgreen">&quot;Transverse resistivity&quot;</font>;

  <font color="blue">protected </font>
    <font color="blue">function</font> b_eta_adj <font color="darkgreen">
      &quot;Return unit-adjusted NASA CEA constants for viscosity&quot;</font>
      <font color="darkgreen">// See note in b_eta_adj() in alpha_tau().</font>
      <font color="blue">output </font>Real b_eta_adj[<font color="red">size</font>(T_lim_alpha, 1) - 1, 4] <font color="darkgreen">
        &quot;Unit-adjusted NASA CEA constants for viscosity&quot;</font>;
    <font color="blue">algorithm </font>
      b_eta_adj := <font color="red">transpose</font>({b_eta[:, 1],b_eta[:, 2],b_eta[:, 3],b_eta[:, 4] -
        b_eta[:, 1]*<font color="red">ln</font>(U.K) + <font color="red">fill</font>(<font color="red">ln</font>(1e-6*U.g/(U.cm*U.s*m)), <font color="red">size</font>(T_lim_alpha,
        1) - 1)});
    <font color="blue">end </font>b_eta_adj;

  <font color="blue">algorithm </font>
    <font color="darkgreen">/*
  assert(T_lim_alpha[1] &lt;= T and T &lt;= T_lim_alpha[size(T_lim_alpha, 1)], &quot;Temperature &quot;
     + String(T/(U.K)) + &quot; K is out of range for the diffusion properties ([&quot; +
    String(T_lim_alpha[1]/U.K) + &quot;, &quot; + String(T_lim_alpha[size(T_lim_alpha, 1)]
    /U.K) + &quot;] K).&quot;);
  */</font>
    <font color="darkgreen">// Note:  This is commented out so that the function can be inlined.</font>
    <font color="darkgreen">// Note:  In Dymola 7.4 T_lim_alpha[end] can&#39;t be used instead of</font>
    <font color="darkgreen">// T_lim_alpha[size(T_lim_alpha, 1)] due to:</font>
    <font color="darkgreen">//     &quot;Error, not all &quot;end&quot; could be expanded.&quot;</font>

    alpha_tau := <font color="red">smooth</font>(0, <font color="red">exp</font>(-<font color="red">sum</font>(<font color="blue">if </font>(T_lim_alpha[i] &lt;= T<font color="blue"> or </font>i == 1)<font color="blue"> and </font>(T &lt;=
      T_lim_alpha[i + 1]<font color="blue"> or </font>i == <font color="red">size</font>(T_lim_alpha, 1) - 1)<font color="blue"> then </font>(<font color="red">b_eta_adj</font>())[i,
      1]*<font color="red">ln</font>(T) + ((<font color="red">b_eta_adj</font>())[i, 2] + (<font color="red">b_eta_adj</font>())[i, 3]/T)/T + (<font color="red">b_eta_adj</font>())
      [i, 4]<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(T_lim_alpha, 1) - 1)));
    <font color="darkgreen">// Note:  The annotation is set assuming that the values of the constants</font>
    <font color="darkgreen">// result in a function that is first-order continuous.</font>

<textblock type="annotcomp" expanded="false">  <font color="blue">end </font>alpha_tau</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.CharacteristicNASA.alpha_Sdot"><font color="blue">function</font> alpha_Sdot <font color="darkgreen">
    &quot;Thermal resistivity as a function of temperature (&alpha;<sub><i>S&#775;</i></sub>)&quot;</font>

    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Resistivity">Q.Resistivity</a> alpha_Sdot <font color="darkgreen">&quot;Thermal transport resistivity&quot;</font>;

  <font color="blue">protected </font>
    <font color="blue">function</font> b_lambda_adj <font color="darkgreen">
      &quot;Return unit-adjusted NASA CEA constants for thermal conductivity&quot;</font>
      <font color="darkgreen">// Note:  If b_lambda were defined as a local constant instead of a</font>
      <font color="darkgreen">// function, it would prevent the alpha_tau function from</font>
      <font color="darkgreen">// being inlined.  If it were defined as a global final constant, it</font>
      <font color="darkgreen">// would need to be updated manually when b_eta is changed.</font>
      <font color="blue">output </font>Real b_lambda_adj[<font color="red">size</font>(T_lim_alpha, 1) - 1, 4] <font color="darkgreen">
        &quot;Unit-adjusted NASA CEA constants for thermal conductivity&quot;</font>;
    <font color="blue">algorithm </font>
      b_lambda_adj := <font color="red">transpose</font>({b_lambda[:, 1],b_lambda[:, 2],b_lambda[:, 3],
        b_lambda[:, 4] - b_lambda[:, 1]*<font color="red">ln</font>(U.K) + <font color="red">fill</font>(<font color="red">ln</font>(1e-6*U.W/(U.cm*U.K)),
        <font color="red">size</font>(T_lim_alpha, 1) - 1)});
    <font color="blue">end </font>b_lambda_adj;

  <font color="blue">algorithm </font>
    <font color="darkgreen">/*
  assert(T_lim_alpha[1] &lt;= T and T &lt;= T_lim_alpha[size(T_lim_alpha, 1)], &quot;Temperature &quot;
     + String(T/(U.K)) + &quot; K is out of range for the diffusion properties ([&quot; +
    String(T_lim_alpha[1]/U.K) + &quot;, &quot; + String(T_lim_alpha[size(T_lim_alpha, 1)]
    /U.K) + &quot;] K).&quot;);
  */</font>
    <font color="darkgreen">// Note:  This is commented out so that the function can be inlined.</font>
    <font color="darkgreen">// Note:  In Dymola 7.4 T_lim_alpha[end] can&#39;t be used instead of</font>
    <font color="darkgreen">// T_lim_alpha[size(T_lim_alpha, 1)] due to:</font>
    <font color="darkgreen">//     &quot;Error, not all &quot;end&quot; could be expanded.&quot;</font>

    alpha_Sdot := <font color="red">smooth</font>(0, <font color="red">exp</font>(-<font color="red">sum</font>(<font color="blue">if </font>(T_lim_alpha[i] &lt;= T<font color="blue"> or </font>i == 1)<font color="blue"> and </font>(T &lt;=
      T_lim_alpha[i + 1]<font color="blue"> or </font>i == <font color="red">size</font>(T_lim_alpha, 1) - 1)<font color="blue"> then </font>(<font color="red">b_lambda_adj</font>())
      [i, 1]*<font color="red">ln</font>(T) + ((<font color="red">b_lambda_adj</font>())[i, 2] + (<font color="red">b_lambda_adj</font>())[i, 3]/T)/T + (<font color="red">
      b_lambda_adj</font>())[i, 4]<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(T_lim_alpha, 1) - 1)));
    <font color="darkgreen">// Note:  The annotation is set assuming that the values of the constants</font>
    <font color="darkgreen">// result in a function that is first-order continuous.</font>
<textblock type="annotcomp" expanded="false">  <font color="blue">end </font>alpha_Sdot</textblock>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>CharacteristicNASA;
</pre>
<hr>

<h2><img src="images/FCSys.Characteristics.BaseClasses.CharacteristicNASAI.png" alt="FCSys.Characteristics.BaseClasses.Characteristic" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Characteristics.BaseClasses.Characteristic"></a><a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses">FCSys.Characteristics.BaseClasses</a>.Characteristic</h2>
<b>Record for thermodynamic and resistive properties</b><p>
<p><h3>Information</h3></p>

    <p>This package is compatible with NASA CEA thermodynamic data
    [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">McBride2002</a>] and the generalized virial equation of state
    [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">Dymond2002</a>].  It is compatible with&mdash;but not limited to&mdash;the
    assumptions of ideal gas and constant specific volume.</p>

    <p>Assumptions:
    <ol><li>Specific mass is constant.</li></ol>
    </p>
    <p>The following notes apply to the constants:
    <ul>
    <li>Currently, <code>formula</code> may not contain parentheses or brackets.</li>
    <li><code>r</code> is the Van der Waals radius or the radius for the
    rigid-sphere ("billiard-ball") approximation of the kinetic theory of gases.</li>
    <li><code>b_v</code>: The powers of <i>p</i>/<i>T</i> increase by row.  The powers of
    <i>T</i> increase by column.  If <code>specVolPow[1] = -1</code>, then the rows
    of <code>b_v</code> correspond to 1, <i>T</i><i>B</i><sup>*</sup>(<i>T</i> ), <i>T</i><sup> 2</sup><i>C</i><sup>*</sup>(<i>T</i> ), <i>T</i><sup> 3</sup><i>D</i><sup>*</sup>(<i>T</i> ), &hellip;
    in [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">Dymond2002</a>].</li>
    <li>The defaults for <code>b_v</code> and <code>specVolPow</code> represent ideal gas.</li>
    <li><code>b_c</code>: The rows give the coefficients for different temperature ranges&mdash;bounded
    by the values in <code>T_lim_c</code>.
    The powers of <i>T</i> increase
    by column.
    By default,
    the powers of <i>T</i> for the 1st column are each -2, which corresponds to [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">McBride2002</a>].
    In that case, the dimensionalities of the coefficients are {M2.L4/(N2.T4), M.L2/(N.T2), 1, &hellip;}
    for each row, where L is length, M is mass, N is number, and T is time. (In <a href="FCSys.html#FCSys">FCSys</a>,
    temperature is a potential with dimension M.L2/(N.T2); see
    the <a href="FCSys_Units.html#FCSys.Units">Units</a> package.)</li>
    <li><code>B_c</code>: As in <code>b_c</code>, the rows correspond to different
    temperature ranges.  The first column is for specific enthalpy and has dimensionality
    M.L2/(N.T2).  The second column is for specific entropy and is dimensionless.
    The integration constants for enthalpy are defined such that the enthalpy at
    25 &deg;C is the specific enthalpy of formation at that temperature [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">McBride2002</a>, p. 2].
    The integration constants for specific entropy are defined such that specific entropy is absolute.</li>
    <li><code>T_lim_c</code>: The first and last entries are the minimum and
    maximum valid temperatures.  The intermediate entries are the thresholds
    between rows of <code>b_c</code> (and <code>B_c</code>).  Therefore, if there are <i>n</i> temperature ranges
    (and rows in <code>b_c</code> and <code>B_c</code>), then <code>T_lim_c</code> must
    have <i>n</i> + 1 entries.</li>
    <li><code>p0</code> is the reference pressure.   In the
    NASA CEA data [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">McBride2002</a>], it is 1 bar for gases or 1 atm for condensed
    species.</li>
    <li>If the <i>p</i>-<i>v</i>-<i>T</i> equation of state includes an ideal gas term, then the
    correlation for specific entropy (<i>s</i>) will involve the natural logarithm of partial pressure.
    The <code>p_min</code> parameter is used to guard against the logarithm of a non-positive pressure.
    To disable this protection (and simplify the translated code), set <code>p_min</code> to zero or a
    negative pressure.</li>
    </ul>
    </p><p>
Extends from <a href="FCSys_BaseClasses_Icons.html#FCSys.BaseClasses.Icons.Record">FCSys.BaseClasses.Icons.Record</a> (Icon for a record).
<p><h3>Parameters</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>String</td><td>formula</td><td>&nbsp;</td><td>Chemical formula</td></tr>
<tr><td>String</td><td>phase</td><td>&nbsp;</td><td>Phase (e.g., &quot;gas&quot;)</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.MassSpecific">MassSpecific</a></td><td>m</td><td>&nbsp;</td><td>Specific mass [m/N]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.LengthSpecific">LengthSpecific</a></td><td>r</td><td>&nbsp;</td><td>Specific radius [l/N]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.PotentialChemical">PotentialChemical</a></td><td>Deltah0_f</td><td>&nbsp;</td><td>Enthalpy of formation at 298.15 K, <i>p</i>&deg; (&Delta;<i>h</i>&deg;<sub>f</sub>)</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.PotentialChemical">PotentialChemical</a></td><td>Deltah0</td><td>&nbsp;</td><td><i>h</i>&deg;(298.15 K) - <i>h</i>&deg;(0 K) (&Delta;<i>h</i>&deg;)</td></tr>
<tr><td>Real</td><td>b_c[size(T_lim_c, 1) - 1, :]</td><td>&nbsp;</td><td>Coefficients of specific heat capacity at <i>p</i>&deg; as a polynomial in <i>T</i> (<i>b</i><sub><i>c</i></sub>)</td></tr>
<tr><td>Real</td><td>B_c[size(T_lim_c, 1) - 1, 2]</td><td>&nbsp;</td><td>Integration constants for specific enthalpy and entropy (<i>B</i><sub><i>c</i></sub>)</td></tr>
</table>
<p><h3>Modelica definition</h3>
<pre>
<font color="blue">record</font> Characteristic <font color="darkgreen">
  &quot;Record for thermodynamic and resistive properties&quot;</font>
  <font color="blue">extends </font><a href="FCSys_BaseClasses_Icons.html#FCSys.BaseClasses.Icons.Record">FCSys.BaseClasses.Icons.Record</a>;

  <font color="blue">constant </font>String formula <font color="darkgreen">&quot;Chemical formula&quot;</font>;
  <font color="blue">constant </font>String phase <font color="darkgreen">&quot;Phase (e.g., \&quot;gas\&quot;)&quot;</font>;
  <font color="blue">constant </font><a href="FCSys_Quantities.html#FCSys.Quantities.MassSpecific">Q.MassSpecific</a> m(min=Modelica.Constants.small) <font color="darkgreen">&quot;Specific mass&quot;</font>;
  <font color="darkgreen">// Note:  The positive minimum value prevents a structural singularity</font>
  <font color="darkgreen">// when checking FCSys.Subregions.Species.SpeciesInertStagnant in Dymola</font>
  <font color="darkgreen">// 7.4.</font>
  <font color="blue">constant </font><a href="FCSys_Quantities.html#FCSys.Quantities.LengthSpecific">Q.LengthSpecific</a> r <font color="darkgreen">&quot;Specific radius&quot;</font>;
  <font color="blue">final </font><font color="blue">constant </font>Integer z=<font color="red">Chemistry.charge</font>(formula) <font color="darkgreen">&quot;Charge number&quot;</font>;
  <font color="blue">constant </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p0=U.bar <font color="darkgreen">&quot;Reference pressure&quot;</font>;
  <font color="blue">constant </font><a href="FCSys_Quantities.html#FCSys.Quantities.Pressure">Q.Pressure</a> p_min=-Modelica.Constants.inf <font color="darkgreen">
    &quot;Minimum pressure for numerical protection&quot;</font>;
  <font color="blue">constant </font>Real b_v[:, :]=[1] <font color="darkgreen">
    &quot;Coefficients of specific volume as a polynomial in p/T and T&quot;</font>;
  <font color="blue">constant </font>Real specVolPow[2]={-1,0} <font color="darkgreen">
    &quot;Powers of p/T and T for 1st row and column of b_v, respectively&quot;</font>;
  <font color="blue">final </font><font color="blue">constant </font>Boolean isCompressible=<font color="red">sum</font>(<font color="red">countTrue</font>({b_v[i, j] &lt;&gt; 0<font color="blue"> and </font>
      specVolPow[1] + i - 1 &lt;&gt; 0 <font color="blue">for </font>i<font color="blue"> in </font>1:size1b_v}) <font color="blue">for </font>j<font color="blue"> in </font>1:size2b_v) &gt; 0
    <font color="darkgreen">&quot;true, if specific volume is a function of pressure&quot;</font>;
  <font color="blue">final </font><font color="blue">constant </font>Boolean hasThermalExpansion=<font color="red">sum</font>(<font color="red">countTrue</font>({b_v[i, j] &lt;&gt; 0<font color="blue"> and </font>
      specVolPow[2] + j - specVolPow[1] - i &lt;&gt; 0 <font color="blue">for </font>i<font color="blue"> in </font>1:size1b_v}) <font color="blue">for </font>j<font color="blue">
       in </font>1:size2b_v) &gt; 0 <font color="darkgreen">
    &quot;true, if specific volume is a function of temperature&quot;</font>;
  <font color="blue">constant </font><a href="FCSys_Quantities.html#FCSys.Quantities.PotentialChemical">Q.PotentialChemical</a> Deltah0_f <font color="darkgreen">
    &quot;Enthalpy of formation at 298.15 K, <i>p</i>&deg; (&Delta;<i>h</i>&deg;<sub>f</sub>)&quot;</font>;
  <font color="blue">constant </font><a href="FCSys_Quantities.html#FCSys.Quantities.PotentialChemical">Q.PotentialChemical</a> Deltah0 <font color="darkgreen">
    &quot;<i>h</i>&deg;(298.15 K) - <i>h</i>&deg;(0 K) (&Delta;<i>h</i>&deg;)&quot;</font>;
  <font color="blue">constant </font><a href="FCSys_Quantities.html#FCSys.Quantities.PotentialChemical">Q.PotentialChemical</a> h_offset=0 <font color="darkgreen">&quot;Additional enthalpy offset&quot;</font>;
  <font color="blue">constant </font>Integer specHeatCapPow=-2 <font color="darkgreen">&quot;Power of T for 1st column of b_c&quot;</font>;
  <font color="blue">constant </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T_lim_c[:]={0,Modelica.Constants.inf} <font color="darkgreen">
    &quot;Temperature limits for the rows of b_c and B_c&quot;</font>;
  <font color="blue">constant </font>Real b_c[<font color="red">size</font>(T_lim_c, 1) - 1, :] <font color="darkgreen">
    &quot;Coefficients of specific heat capacity at <i>p</i>&deg; as a polynomial in <i>T</i> (<i>b</i><sub><i>c</i></sub>)&quot;</font>;
  <font color="blue">constant </font>Real B_c[<font color="red">size</font>(T_lim_c, 1) - 1, 2] <font color="darkgreen">
    &quot;Integration constants for specific enthalpy and entropy (<i>B</i><sub><i>c</i></sub>)&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">constant </font>Real pressPow[2]={specVolPow[1] - size1b_v + 1,specVolPow[2] +
      1} <font color="darkgreen">&quot;Powers of v and T for 1st row and column of b_p, respectively&quot;</font>;
  <font color="blue">final </font><font color="blue">constant </font>Real b_p[size1b_v, size2b_v]={(<font color="blue">if </font>specVolPow[1] + i == 0<font color="blue"> or </font>
      specVolPow[1] + i == 1<font color="blue"> then </font>b_v[i, :]<font color="blue"> else </font>(<font color="blue">if </font>specVolPow[1] + i == 2<font color="blue">
       and </font>specVolPow[1] &lt;= 0<font color="blue"> then </font>b_v[i, :] + b_v[i - 1, :] .^ 2<font color="blue"> else </font>(<font color="blue">if </font>
      specVolPow[1] + i == 3<font color="blue"> and </font>specVolPow[1] &lt;= 0<font color="blue"> then </font>b_v[i, :] + b_v[i - 2,
      :] .* (b_v[i - 2, :] .^ 2 + 3*b_v[i - 1, :])<font color="blue"> else </font><font color="red">zeros</font>(size2b_v)))) <font color="blue">for </font>
      i<font color="blue"> in </font>size1b_v:-1:1} <font color="darkgreen">&quot;Coefficients of p as a polynomial in v and T&quot;</font>;
  <font color="darkgreen">// Note:  pressPow and b_p are only used in h_pT(); however, in Dymola 7.4</font>
  <font color="darkgreen">// they must be defined here (global to h_pT()) so that they are updated</font>
  <font color="darkgreen">// properly when the size of b_v is changed from its default.</font>
  <font color="blue">final </font><font color="blue">constant </font>Integer size1b_v=<font color="red">size</font>(b_v, 1) <font color="darkgreen">&quot;Number of rows in b_v&quot;</font>;
  <font color="blue">final </font><font color="blue">constant </font>Integer size2b_v=<font color="red">size</font>(b_v, 2) <font color="darkgreen">&quot;Number of columns in b_v&quot;</font>;

<font color="blue">public </font>
  <font color="blue">partial </font><font color="blue">function</font> alpha <font color="darkgreen">
    &quot;Ideal transport resistivity as a function of temperature (&alpha;)&quot;</font>
    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Resistivity">Q.Resistivity</a> beta <font color="darkgreen">&quot;Resistivity&quot;</font>;

  <font color="blue">algorithm </font>
    beta := 6*U.pi*r^2*U.q*<font color="red">sqrt</font>(U.pi*m/T);
  <font color="blue">end </font>alpha;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.Characteristic.c_p"><font color="blue">function</font> c_p <font color="darkgreen">
    &quot;Specific heat capacity at constant pressure as a function of temperature (<i>c</i><sub><i>p</i></sub>)&quot;</font>
    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.CapacityThermalSpecific">Q.CapacityThermalSpecific</a> c_p <font color="darkgreen">
      &quot;Specific heat capacity at constant pressure&quot;</font>;

  <font color="blue">algorithm </font>
    <font color="darkgreen">/*
    assert(T_lim_c[1] &lt;= T and T &lt;= T_lim_c[size(T_lim_c, 1)], &quot;Temperature &quot; +
      String(T/U.K) + &quot; K is out of range for &quot; + name + &quot; ([&quot; + String(T_lim_c[1]
      /U.K) + &quot;, &quot; + String(T_lim_c[size(T_lim_c, 1)]/U.K) + &quot;] K).&quot;);
    */</font>
    <font color="darkgreen">// Note:  This is commented out so that the function can be inlined.</font>
    <font color="darkgreen">// Note:  In Dymola 7.4 T_lim_c[end] can&#39;t be used instead of</font>
    <font color="darkgreen">// T_lim_c[size(T_lim_c, 1)] due to:</font>
    <font color="darkgreen">//    &quot;Error, not all &#39;end&#39; could be expanded.&quot;</font>

    c_p := <font color="red">smooth</font>(0, <font color="red">sum</font>(<font color="blue">if </font>(T_lim_c[i] &lt;= T<font color="blue"> or </font>i == 1)<font color="blue"> and </font>(T &lt; T_lim_c[i + 1]<font color="blue">
       or </font>i == <font color="red">size</font>(T_lim_c, 1) - 1)<font color="blue"> then </font><font color="red">poly</font>(
        T,
        b_c[i, :],
        specHeatCapPow)<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(T_lim_c, 1) - 1));

  <font color="blue">end </font>c_p</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.Characteristic.c_V"><font color="blue">function</font> c_V <font color="darkgreen">
    &quot;Specific heat capacity at constant volume as a function of temperature (<i>c</i><sub><i>V</i></sub>)&quot;</font>
    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.CapacityThermalSpecific">Q.CapacityThermalSpecific</a> c_V <font color="darkgreen">
      &quot;Specific heat capacity at constant volume&quot;</font>;

  <font color="blue">algorithm </font>
    c_V := <font color="red">c_p</font>(T) - 1 <font color="darkgreen">&quot;TODO:  Make this general (currently assumes ideal gas).&quot;</font>;

  <font color="blue">end </font>c_V</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.Characteristic.dp"><font color="blue">function</font> dp <font color="darkgreen">
    &quot;Derivative of pressure as it is defined by <a href=\"FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.p_vT\">p_vT</a>()&quot;</font>
    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">Q.VolumeSpecific</a> v=U.atm/(298.15*U.K) <font color="darkgreen">&quot;Specific volume&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">Q.VolumeSpecific</a> dv=0 <font color="darkgreen">&quot;Derivative of specific volume&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.Temperature">Q.Temperature</a> dT=0 <font color="darkgreen">&quot;Derivative of temperature&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Pressure">Q.Pressure</a> dp <font color="darkgreen">&quot;Derivative of pressure&quot;</font>;

  <font color="blue">algorithm </font>
    dp := <font color="blue">if </font>isCompressible<font color="blue"> then </font><font color="red">poly</font>(
        v,
        {(pressPow[1] + i - 1)*<font color="red">poly</font>(
          T,
          b_p[i, :],
          pressPow[2]) <font color="blue">for </font>i<font color="blue"> in </font>1:size1b_v},
        pressPow[1] - 1)*dv + <font color="red">poly</font>(
        T,
        {(pressPow[2] + i - 1)*<font color="red">poly</font>(
          v,
          b_p[:, i],
          pressPow[1]) <font color="blue">for </font>i<font color="blue"> in </font>1:size2b_v},
        pressPow[2] - 1)*dT<font color="blue"> else </font>0;
  <font color="blue">end </font>dp</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.Characteristic.g_pT"><font color="blue">function</font> g_pT <font color="darkgreen">
    &quot;Gibbs potential as a function of pressure and temperature&quot;</font>

    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p=1*U.atm <font color="darkgreen">&quot;Pressure&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.ReferenceEnthalpy">ReferenceEnthalpy</a> referenceEnthalpy=ReferenceEnthalpy.EnthalpyOfFormationAt25degC
      <font color="darkgreen">&quot;Choice of enthalpy reference&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Potential">Q.Potential</a> g <font color="darkgreen">&quot;Gibbs potential&quot;</font>;

  <font color="blue">protected </font>
    <font color="blue">function</font> g0_i <font color="darkgreen">
      &quot;Return g0 as a function of T using one of the temperature ranges, with enthalpy of formation at 25 degC&quot;</font>
      <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
      <font color="blue">input </font>Integer i <font color="darkgreen">&quot;index of the temperature range&quot;</font>;
      <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Potential">Q.Potential</a> g0_i <font color="darkgreen">&quot;g0&quot;</font>;

    <font color="blue">algorithm </font>
      g0_i := <font color="red">poly</font>(
            T,
            {b_c[i, j]*((<font color="blue">if </font>specHeatCapPow + j == 0<font color="blue"> then </font><font color="red">ln</font>(T)<font color="blue"> else </font>1/(
          specHeatCapPow + j)) - (<font color="blue">if </font>specHeatCapPow + j == 1<font color="blue"> then </font><font color="red">ln</font>(T)<font color="blue"> else </font>1/(
          specHeatCapPow + j - 1))) - (<font color="blue">if </font>specHeatCapPow + j == 1<font color="blue"> then </font>B_c[i, 2]<font color="blue">
           else </font>0) <font color="blue">for </font>j<font color="blue"> in </font>1:<font color="red">size</font>(b_c, 2)},
            specHeatCapPow + 1) + B_c[i, 1];
    <font color="blue">end </font>g0_i;

  <font color="blue">algorithm </font>
    <font color="darkgreen">/*
    assert(T_lim_c[1] &lt;= T and T &lt;= T_lim_c[size(T_lim_c, 1)], &quot;Temperature &quot; +
    String(T/U.K) + &quot; K is out of range for &quot; + name + &quot; ([&quot; + String(T_lim_c[1]
    /U.K) + &quot;, &quot; + String(T_lim_c[size(T_lim_c, 1)]/U.K) + &quot;] K).&quot;);
    */</font>
    <font color="darkgreen">// Note:  This is commented out so that the function can be inlined.</font>
    <font color="darkgreen">// Note:  In Dymola 7.4 T_lim_c[end] can&#39;t be used instead of</font>
    <font color="darkgreen">// T_lim_c[size(T_lim_c, 1)] due to:</font>
    <font color="darkgreen">//    &quot;Error, not all &#39;end&#39; could be expanded.&quot;</font>

    g := <font color="red">smooth</font>(1, <font color="red">sum</font>(<font color="blue">if </font>(T_lim_c[i] &lt;= T<font color="blue"> or </font>i == 1)<font color="blue"> and </font>(T &lt; T_lim_c[i + 1]<font color="blue">
       or </font>i == <font color="red">size</font>(T_lim_c, 1) - 1)<font color="blue"> then </font><font color="red">g0_i</font>(T, i)<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(
      T_lim_c, 1) - 1) + (<font color="blue">if </font>referenceEnthalpy == ReferenceEnthalpy.ZeroAt0K<font color="blue">
       then </font>Deltah0<font color="blue"> else </font>0) - (<font color="blue">if </font>referenceEnthalpy == ReferenceEnthalpy.ZeroAt25degC<font color="blue">
       then </font>Deltah0_f<font color="blue"> else </font>0) + h_offset + <font color="red">sum</font>((<font color="blue">if </font>specVolPow[1] + i == 0<font color="blue"> then </font><font color="red">
      ln</font>((<font color="blue">if </font>p_min &gt; 0<font color="blue"> then </font><font color="red">max</font>(p, p_min)<font color="blue"> else </font>p)/p0)<font color="blue"> else </font>(p^(specVolPow[1] +
      i) - p0^(specVolPow[1] + i))/(specVolPow[1] + i))*<font color="red">poly</font>(
        T,
        b_v[i, :],
        specVolPow[2] - specVolPow[1] - i + 1) <font color="blue">for </font>i<font color="blue"> in </font>1:size1b_v));
    <font color="darkgreen">// The first term is the integral of c0*dT up to T with the reference</font>
    <font color="darkgreen">// enthalpy at the lower bound [McBride2002, p. 2] plus T times the</font>
    <font color="darkgreen">// integral of (c0/T)*dT up to T with absolute entropy at the lower bound.</font>
    <font color="darkgreen">// Both of these integrals are taken at p0.  The second polynomial is the</font>
    <font color="darkgreen">// integral of v*dP from p0 to p (at T).</font>
  <font color="blue">end </font>g_pT</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.Characteristic.h0"><font color="blue">function</font> h0 <font color="darkgreen">
    &quot;Specific enthalpy as a function temperature at reference pressure (<i>h</i>&deg;)&quot;</font>

    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.ReferenceEnthalpy">ReferenceEnthalpy</a> referenceEnthalpy=ReferenceEnthalpy.EnthalpyOfFormationAt25degC
      <font color="darkgreen">&quot;Choice of enthalpy reference&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Potential">Q.Potential</a> h0 <font color="darkgreen">&quot;Specific enthalpy at reference pressure&quot;</font>;

  <font color="blue">protected </font>
    <font color="blue">function</font> h0_i <font color="darkgreen">
      &quot;Return h0 as a function of T using one of the temperature ranges, with enthalpy of formation at 25 degC&quot;</font>
      <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
      <font color="blue">input </font>Integer i <font color="darkgreen">&quot;index of the temperature range&quot;</font>;
      <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Potential">Q.Potential</a> h0_i <font color="darkgreen">&quot;h0&quot;</font>;

    <font color="blue">algorithm </font>
      h0_i := <font color="red">poly</font>(
            T,
            b_c[i, :] .* {<font color="blue">if </font>specHeatCapPow + j == 0<font color="blue"> then </font><font color="red">ln</font>(T)<font color="blue"> else </font>1/(
          specHeatCapPow + j) <font color="blue">for </font>j<font color="blue"> in </font>1:<font color="red">size</font>(b_c, 2)},
            specHeatCapPow + 1) + B_c[i, 1];
    <font color="blue">end </font>h0_i;

  <font color="blue">algorithm </font>
    <font color="darkgreen">/*
    assert(T_lim_c[1] &lt;= T and T &lt;= T_lim_c[size(T_lim_c, 1)], &quot;Temperature &quot; +
    String(T/U.K) + &quot; K is out of range for &quot; + name + &quot; ([&quot; + String(T_lim_c[1]
    /U.K) + &quot;, &quot; + String(T_lim_c[size(T_lim_c, 1)]/U.K) + &quot;] K).&quot;);
    */</font>
    <font color="darkgreen">// Note:  This is commented out so that the function can be inlined.</font>
    <font color="darkgreen">// Note:  In Dymola 7.4 T_lim_c[end] can&#39;t be used instead of</font>
    <font color="darkgreen">// T_lim_c[size(T_lim_c, 1)] due to:</font>
    <font color="darkgreen">//    &quot;Error, not all &#39;end&#39; could be expanded.&quot;</font>

    h0 := <font color="red">smooth</font>(1, <font color="red">sum</font>(<font color="blue">if </font>(T_lim_c[i] &lt;= T<font color="blue"> or </font>i == 1)<font color="blue"> and </font>(T &lt; T_lim_c[i + 1]<font color="blue">
       or </font>i == <font color="red">size</font>(T_lim_c, 1) - 1)<font color="blue"> then </font><font color="red">h0_i</font>(T, i)<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(
      T_lim_c, 1) - 1) + (<font color="blue">if </font>referenceEnthalpy == ReferenceEnthalpy.ZeroAt0K<font color="blue">
       then </font>Deltah0<font color="blue"> else </font>0) - (<font color="blue">if </font>referenceEnthalpy == ReferenceEnthalpy.ZeroAt25degC<font color="blue">
       then </font>Deltah0_f<font color="blue"> else </font>0) + h_offset);
    <font color="darkgreen">// The first term is the integral of c0*dT up to T at p0 with the</font>
    <font color="darkgreen">// reference enthalpy at the lower bound [McBride2002, p. 2].</font>
  <font color="blue">end </font>h0</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.Characteristic.p_vT"><font color="blue">function</font> p_vT <font color="darkgreen">
    &quot;Pressure as a function of specific volume and temperature&quot;</font>
  annotation(derivative=<a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.Characteristic.dp">dp</a>);
    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">Q.VolumeSpecific</a> v=U.atm/(298.15*U.K) <font color="darkgreen">&quot;Specific volume&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p <font color="darkgreen">&quot;Pressure&quot;</font>;

  <font color="blue">algorithm </font>
    <font color="darkgreen">// assert(isCompressible,</font>
    <font color="darkgreen">//  &quot;The pressure is undefined since the material is incompressible.&quot;,</font>
    <font color="darkgreen">//  AssertionLevel.warning);</font>
    <font color="darkgreen">// Note:  In Dymola 7.4 the assertion level can&#39;t be set, although it has</font>
    <font color="darkgreen">// been defined as an argument to assert() since Modelica 3.0.</font>

    p := <font color="blue">if </font>isCompressible<font color="blue"> then </font><font color="red">poly</font>(
        v,
        {<font color="red">poly</font>(
          T,
          b_p[i, :],
          pressPow[2]) <font color="blue">for </font>i<font color="blue"> in </font>1:size1b_v},
        pressPow[1])<font color="blue"> else </font>0;
<textblock type="annotcomp" expanded="false">  <font color="blue">end </font>p_vT</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.Characteristic.s_pT"><font color="blue">function</font> s_pT <font color="darkgreen">
    &quot;Specific entropy as a function of pressure and temperature&quot;</font>
    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p=1*U.atm <font color="darkgreen">&quot;Pressure&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> s <font color="darkgreen">&quot;Specific entropy&quot;</font>;

  <font color="blue">protected </font>
    <font color="blue">function</font> s0_i <font color="darkgreen">
      &quot;Return s0 as a function of T using one of the temperature ranges&quot;</font>
      <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
      <font color="blue">input </font>Integer i <font color="darkgreen">&quot;index of the temperature range&quot;</font>;
      <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> s0_i <font color="darkgreen">&quot;s0&quot;</font>;

    <font color="blue">algorithm </font>
      s0_i := <font color="red">poly</font>(
            T,
            b_c[i, :] .* {<font color="blue">if </font>specHeatCapPow + j == 1<font color="blue"> then </font><font color="red">ln</font>(T)<font color="blue"> else </font>1/(
          specHeatCapPow + j - 1) <font color="blue">for </font>j<font color="blue"> in </font>1:<font color="red">size</font>(b_c, 2)},
            specHeatCapPow) + B_c[i, 2];
    <font color="blue">end </font>s0_i;

  <font color="blue">algorithm </font>
    <font color="darkgreen">/*
  assert(T_lim_c[1] &lt;= T and T &lt;= T_lim_c[size(T_lim_c, 1)], &quot;Temperature &quot; +
    String(T/U.K) + &quot; K is out of range for &quot; + name + &quot; ([&quot; + String(T_lim_c[1]
    /U.K) + &quot;, &quot; + String(T_lim_c[size(T_lim_c, 1)]/U.K) + &quot;] K).&quot;);
  */</font>
    <font color="darkgreen">// Note:  This is commented out so that the function can be inlined.</font>
    <font color="darkgreen">// Note:  In Dymola 7.4 T_lim_c[end] can&#39;t be used instead of</font>
    <font color="darkgreen">// T_lim_c[size(T_lim_c, 1)] due to:</font>
    <font color="darkgreen">//    &quot;Error, not all &#39;end&#39; could be expanded.&quot;</font>

    s := <font color="red">smooth</font>(1, <font color="red">sum</font>(<font color="blue">if </font>(T_lim_c[i] &lt;= T<font color="blue"> or </font>i == 1)<font color="blue"> and </font>(T &lt; T_lim_c[i + 1]<font color="blue">
       or </font>i == <font color="red">size</font>(T_lim_c, 1) - 1)<font color="blue"> then </font><font color="red">s0_i</font>(T, i)<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(
      T_lim_c, 1) - 1) - <font color="red">sum</font>((<font color="blue">if </font>specVolPow[1] + i == 0<font color="blue"> then </font><font color="red">ln</font>((<font color="blue">if </font>p_min &gt; 0<font color="blue">
       then </font><font color="red">max</font>(p, p_min)<font color="blue"> else </font>p)/p0)<font color="blue"> else </font>(p^(specVolPow[1] + i) - p0^(
      specVolPow[1] + i))/(specVolPow[1] + i))*<font color="red">poly</font>(
        T,
        b_v[i, :],
        specVolPow[2] - specVolPow[1] - i) <font color="blue">for </font>i<font color="blue"> in </font>1:size1b_v));
    <font color="darkgreen">// The first term is the integral of c0/T*dT up to T at p0 with the</font>
    <font color="darkgreen">// absolute entropy at the lower bound [McBride2002, p. 2].  The second</font>
    <font color="darkgreen">// polynomial is the integral of v*dP from p0 to p (at T).</font>
  <font color="blue">end </font>s_pT</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.BaseClasses.Characteristic.v_pT"><font color="blue">function</font> v_pT <font color="darkgreen">
    &quot;Specific volume as a function of pressure and temperature&quot;</font>
    <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p=1*U.atm <font color="darkgreen">&quot;Pressure&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">Q.VolumeSpecific</a> v <font color="darkgreen">&quot;Specific volume&quot;</font>;

  <font color="blue">algorithm </font>
    v := <font color="red">poly</font>(
        p/T,
        {<font color="red">poly</font>(
          T,
          b_v[i, :],
          specVolPow[2]) <font color="blue">for </font>i<font color="blue"> in </font>1:size1b_v},
        specVolPow[1]);
  <font color="blue">end </font>v_pT</textblock>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Characteristic;
</pre>
<hr>

<h2><img src="images/FCSys.Characteristics.BaseClasses.Characteristic.dpI.png" alt="FCSys.Characteristics.BaseClasses.Characteristic.dp" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Characteristics.BaseClasses.Characteristic.dp"></a><a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.Characteristic">FCSys.Characteristics.BaseClasses.Characteristic</a>.dp</h2>
<b>Derivative of pressure as it is defined by <a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.p_vT">p_vT</a>()</b><p>
<p><h3>Information</h3></p>
Extends from <a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).
<p><h3>Inputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">VolumeSpecific</a></td><td>v</td><td>U.atm/(298.15*U.K)</td><td>Specific volume [l3/N]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">TemperatureAbsolute</a></td><td>T</td><td>298.15*U.K</td><td>Temperature</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">VolumeSpecific</a></td><td>dv</td><td>0</td><td>Derivative of specific volume [l3/N]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Temperature">Temperature</a></td><td>dT</td><td>0</td><td>Derivative of temperature</td></tr>
</table>
<p><h3>Outputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Pressure">Pressure</a></td><td>dp</td><td>Derivative of pressure [m/(l.T2)]</td></tr>
</table>
<p><h3>Modelica definition</h3>
<pre>
<font color="blue">function</font> dp <font color="darkgreen">
  &quot;Derivative of pressure as it is defined by <a href=\"FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.p_vT\">p_vT</a>()&quot;</font>
  <font color="blue">extends </font><a href="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">Q.VolumeSpecific</a> v=U.atm/(298.15*U.K) <font color="darkgreen">&quot;Specific volume&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">Q.VolumeSpecific</a> dv=0 <font color="darkgreen">&quot;Derivative of specific volume&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.Temperature">Q.Temperature</a> dT=0 <font color="darkgreen">&quot;Derivative of temperature&quot;</font>;
  <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Pressure">Q.Pressure</a> dp <font color="darkgreen">&quot;Derivative of pressure&quot;</font>;

<font color="blue">algorithm </font>
  dp := <font color="blue">if </font>isCompressible<font color="blue"> then </font><font color="red">poly</font>(
    v,
    {(pressPow[1] + i - 1)*<font color="red">poly</font>(
      T,
      b_p[i, :],
      pressPow[2]) <font color="blue">for </font>i<font color="blue"> in </font>1:size1b_v},
    pressPow[1] - 1)*dv + <font color="red">poly</font>(
    T,
    {(pressPow[2] + i - 1)*<font color="red">poly</font>(
      v,
      b_p[:, i],
      pressPow[1]) <font color="blue">for </font>i<font color="blue"> in </font>1:size2b_v},
    pressPow[2] - 1)*dT<font color="blue"> else </font>0;
<font color="blue">end </font>dp;
</pre>
      </div>
    </div>
  </div>
</div>
<div class="footer">
  &copy; Copyright 2012, Kevin Davies, Georgia Tech Research Corporation. Last updated Mon Dec 10 17:54:25 2012.
</div>
</body>
</html>
